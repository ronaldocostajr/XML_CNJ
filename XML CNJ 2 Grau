set data.inicio to :'dt_inicio';
set data.inicio to :'dt_inicio';
set data.fim to :'dt_fim';

DO language plpgsql $$
declare 
	proc    record;
	parte   record;
	polo    record;
	assunto record;
	advogado record;
	enderecoAdv record;
	documento record;
	prioridade record;
	procVinculo record;
	pessoaVinc record;
	enderecoVinc record;
	documentoVinc record;
	pessoaRel record;
	enderecoRel record;
	documentoRel record;
	parteProcRel record;
	enderecoProcRel record;
	documentoProcRel record;
	magAtuante record;
	endereco record;
	mov     record;
	compl   record;

	conta_assunto integer;
	conta_doc integer;

	cd_assunto_trf_anterior varchar;
	nome_corrigido varchar;
	complemento_corrigido varchar;
	logradouro_corrigido varchar;

	codComplemento varchar;
	codComplemento10966 varchar;
	descricaoComplemento varchar;
	codComplementoTabelado varchar;
	tipoResponsavelMovimento varchar;
	localizacaoProcesso varchar;

	complemento_concatenado varchar;
	movimentoLocalTabelado varchar;
	txtComplemento varchar;  
	ARRAYcodComplemento text[];
	ARRAYdescricaoComplemento text[];
	ARRAYcodComplementoTabelado text[];

	org_ds_sigla varchar;
	org_ds_orgao_julgador varchar;
	org_tp_instancia varchar;
	org_id_municipio_ibge_atual varchar;
	magProlator varchar;  
	conta_classe_alterada integer;
	conta_polo integer;
	tag_orgao_julgador varchar;  

	cd_municipio_ibge_trt varchar := '2507507';
	dt_inicio_periodo date := to_date(current_setting('data.inicio'), 'dd-mm-yyyy');
	dt_fim_periodo date := to_date(current_setting('data.fim'), 'dd-mm-yyyy');
	--dt_inicio_periodo date := to_date('01-07-2020', 'dd-mm-yyyy');
	--dt_fim_periodo date := to_date('03-07-2020', 'dd-mm-yyyy');
begin
  /* XML header */
   raise notice '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>';

  /* processos */
   raise notice '<cnj:processos xmlns:cnj="http://www.cnj.jus.br/replicacao-nacional" xmlns="http://www.cnj.jus.br/intercomunicacao-2.2.2">';
  
  for proc in 
  (
    SELECT 
      pt.id_processo_trf,
      pt.nr_sequencia,
      pt.nr_ano,
      pt.nr_origem_processo,
      pt.ds_proc_referencia,
      /*** dadosBasicos ***/
      /* nivelSigilo */
      case when pt.in_segredo_justica = 'S' then 5 else 0 end as nivelSigilo, /* avaliar melhor */
      /* numero */
      regexp_replace(p.nr_processo, '[\.\-]', '', 'g') nr_processo,
      /* classeProcessual */
      cj.cd_classe_judicial,
      /* codigoLocalidade */
      cd_municipio_ibge_trt id_municipio_ibge_origem,
      /* dataAjuizamento */
      to_char(coalesce(pt.dt_autuacao, p.dt_inicio), 'yyyymmddhh24miss') dt_autuacao,
      /* competencia */
      (
        select ca.id_competencia
        from tb_competencia_cl_assunto ca
        inner join tb_classe_aplicacao ac on 1=1
          and ac.id_classe_aplicacao = ca.id_classe_aplicacao
        where 1=1
          and ac.id_classe_judicial = cj.id_classe_judicial
        order by ca.dt_fim nulls first
        limit 1
      ) nu_competencia, 
      /* intervencaoMP */
      coalesce((
        select 'true'::varchar 
        from tb_processo_parte ppi
        inner join tb_pessoa_juridica pji on 1=1
          and 'S' = pji.in_orgao_publico
          and pji.id_pessoa_juridica = ppi.id_pessoa
        inner join tb_ramo_atividade rai on 1=1
          and 'ADMINISTRAÇÃO PÚBLICA EM GERAL' = rai.ds_ramo_atividade
          and rai.id_ramo_atividade = pji.id_ramo_atividade
        where 1=1
          and ppi.id_processo_trf = pt.id_processo_trf
        limit 1
      ), 'false') fl_intervencaoMP, 
      /* tamanhoProcesso */
      (
        select least(2147483647, sum(coalesce(pb.nr_tamanho, 0))) nr_tamanho
        from tb_processo_documento pd
        inner join tb_processo_documento_bin pb on 1=1
          and pb.id_processo_documento_bin = pd.id_processo_documento_bin
        where 1=1
          and pd.id_processo = pt.id_processo_trf
      ) nu_tamanho_bytes,

      /*** orgaoJulgador ***/
      /* codigoOrgao */
	  --ALTERADO CONFORME INSTRUÇÃO DE DR. ADRIANO EM 06/07/2020 POR TELECONFERÊNCIA1
      --case when ps.id_processo_trf is not null then serv_ojc.cod_serventia else serv_oj.cod_serventia end ds_sigla,
	  serv_oj.cod_serventia as ds_sigla,
	  serv_ojc.cod_serventia as id_orgao_colegiado,
      /* nomeOrgao */
      --case when ps.id_processo_trf is not null then serv_ojc.nom_org_julg  else serv_oj.nom_org_julg  end ds_orgao_julgador,
	  serv_oj.nom_org_julg as ds_orgao_julgador,
	  serv_ojc.nom_org_julg as ds_orgao_colegiado,
      /* instancia */
      case when pt.nr_instancia = '2' then 'ORIG' else 'REV' end tp_instancia, 
      /* codigoMunicipioIBGE */
      cd_municipio_ibge_trt id_municipio_ibge_atual,

      /*** valorCausa ***/
      pt.vl_causa::varchar valorCausa
    FROM tb_processo_trf pt
    INNER JOIN tb_processo p ON 1=1
     and p.id_processo = pt.id_processo_trf
    INNER JOIN tb_classe_judicial cj ON 1=1
      and cj.id_classe_judicial = pt.id_classe_judicial and cj.cd_classe_judicial not in ('183','1145','1231','191')
    /*
    INNER JOIN tb_jurisdicao_municipio jm ON 1=1
      and jm.id_jurisdicao = oj.id_jurisdicao
      AND jm.in_sede        = 'S'
    INNER JOIN tb_municipio_ibge ib ON 1=1
      and ib.id_municipio = jm.id_municipio
    */
    LEFT JOIN tb_orgao_julgador og ON 1=1
      and og.id_orgao_julgador = pt.id_orgao_julgador
      and og.in_posto_avancado = 'N'
      and og.in_cejusc = 'N'
      and og.ds_orgao_julgador not ilike '%plantonista%'
      and og.ds_orgao_julgador not ilike '%orregedoria%'
	  and og.ds_orgao_julgador not ilike '%onvocado%'	
      and og.ds_orgao_julgador not ilike '%CEJUSC%'	  
      --TEM QUE VER ESSA PARTE DA CORREGEDORIA
	  
    LEFT JOIN 
    (
      select distinct 
        id_processo_trf,
        first_value(id_oj_origem) over(partition by id_processo_trf order by dt_deslocamento desc) id_orgao_julgador
      from tb_hist_desloca_oj 
      where 1=1
        and dt_deslocamento < dt_fim_periodo + interval '1' month
        and id_oj_origem in 
        (
          select id_orgao_julgador
          from tb_orgao_julgador
          where 1=1
            and in_posto_avancado = 'N'
            and in_cejusc = 'N'
            and ds_orgao_julgador not ilike '%plantonista%'
			and ds_orgao_julgador not ilike '%orregedoria%'
			and ds_orgao_julgador not ilike '%onvocado%'
			and ds_orgao_julgador not ilike '%CEJUSC%'
			--TEM QUE VER ESSA PARTE DA CORREGEDORIA
			
        )
    ) ds on 1=1
      and ds.id_processo_trf = pt.id_processo_trf
    LEFT JOIN tb_orgao_julgador oj ON 1=1
      and oj.id_orgao_julgador = coalesce(og.id_orgao_julgador, ds.id_orgao_julgador)
      and oj.ds_orgao_julgador not ilike '%plantonista%'
 	  and oj.ds_orgao_julgador not ilike '%orregedoria%'
	  and oj.ds_orgao_julgador not ilike '%onvocado%'
	  and oj.ds_orgao_julgador not ilike '%CEJUSC%'
			
    LEFT JOIN tb_orgao_julgador_colgiado ojc ON 1=1
      and ojc.id_orgao_julgador_colegiado = pt.id_orgao_julgador_colegiado
      and ojc.ds_orgao_julgador_colegiado not ilike '%plantonista%'
 	  and ojc.ds_orgao_julgador_colegiado not ilike '%orregedoria%'
	  and ojc.ds_orgao_julgador_colegiado not ilike '%onvocado%'
	  and ojc.ds_orgao_julgador_colegiado not ilike '%CEJUSC%'	  
	  
    LEFT JOIN 
    (
      select 70700 cod_serventia, 45 num_org_julg, 'Gabinete do Desembargador Thiago de Oliveira Andrade' 			nom_org_julg union
      select 70705 cod_serventia, 59 num_org_julg, 'Gabinete do Desembargador Leonardo José Videres Trajano' 		nom_org_julg union
      select 70701 cod_serventia, 55 num_org_julg, 'Gabinete do Desembargador Paulo Maia Filho' 					nom_org_julg union
      select 71253 cod_serventia, 51 num_org_julg, 'Gabinete da Desembargadora Ana Maria Ferreira Madruga' 			nom_org_julg union
      select 70698 cod_serventia, 56 num_org_julg, 'Gabinete do Desembargador Carlos Coelho de Miranda Freire' 		nom_org_julg union
      select 70703 cod_serventia, 50 num_org_julg, 'Gabinete do Desembargador Eduardo Sérgio de Almeida' 			nom_org_julg union
      select 70699 cod_serventia, 49 num_org_julg, 'Gabinete do Desembargador Edvaldo de Andrade' 					nom_org_julg union
      select 70697 cod_serventia, 52 num_org_julg, 'Gabinete do Desembargador Francisco de Assis Carvalho e Silva' 	nom_org_julg union
      select 70702 cod_serventia, 54 num_org_julg, 'Gabinete do Desembargador Ubiratan Moreira Delgado' 			nom_org_julg union
      select 77697 cod_serventia, 57 num_org_julg, 'Gabinete da Presidência' 										nom_org_julg union
      select 77698 cod_serventia, 58 num_org_julg, 'Gabinete da Vice-Presidência' 									nom_org_julg union
      select 70704 cod_serventia, 53 num_org_julg, 'Gabinete do Desembargador Wolney de Macedo Cordeiro' 			nom_org_julg
    ) serv_oj on 1=1
      and serv_oj.num_org_julg  = oj.id_orgao_julgador
    LEFT JOIN
    (
      select 19543 cod_serventia, 6 num_org_julg, 'Secretaria da Primeira Turma' 	nom_org_julg union
      select 19544 cod_serventia, 7 num_org_julg, 'Secretaria da Segunda Turma' 	nom_org_julg union
      select 19545 cod_serventia, 8 num_org_julg, 'Secretaria do Tribunal Pleno' 	nom_org_julg
    ) serv_ojc on 1=1
      and serv_ojc.num_org_julg = ojc.id_orgao_julgador_colegiado
    INNER JOIN 
    (
      /* item 92.220 */
      select distinct pr.id_processo_trf
      from tb_processo_trf pr 
      inner join tb_processo_evento ad on 1=1
        and ad.id_processo = pr.id_processo_trf
        and ad.id_processo_evento_excludente IS NULL
      where 1=1
        and ad.dt_atualizacao >= dt_inicio_periodo
        and ad.dt_atualizacao <= dt_fim_periodo 
    ) pc on 1=1
      and pc.id_processo_trf = pt.id_processo_trf
    LEFT JOIN 
    (
      select ps.id_processo_trf 
      from pje_jt.tb_pauta_sessao ps
      inner join pje_jt.tb_tipo_situacao_pauta sp on 1=1
        and sp.in_classificacao = 'A'
        and sp.in_ativo = 'S'
        and sp.id_tipo_situacao_pauta = ps.id_tipo_situacao_pauta
      where 1=1
        /* and ps.id_processo_trf = 2001 */
    ) ps on 1=1
      and ps.id_processo_trf = pt.id_processo_trf 
    WHERE 1=1
      and p.nr_processo is not null
	  and serv_ojc.num_org_julg is not null
	  and pt.dt_autuacao is not null
	--and pt.id_processo_trf = 123456
  )
  LOOP
  if proc.ds_orgao_julgador is null Then
     continue;
  end if;	 
  
	select count(1)
	into conta_polo
	from tb_processo_parte pp 
	WHERE 1=1
	and pp.in_situacao='A'
	and pp.id_tipo_parte <> 7 /* advogado */
	and pp.id_processo_trf = proc.id_processo_trf;
	
	IF conta_polo = 0 THEN
	  continue;
	END IF;    

	conta_polo := 0;
	
	SELECT count(1)
	into conta_polo
	FROM tb_processo_evento pe 
	WHERE 1=1
	AND pe.id_processo_evento_excludente IS NULL
	AND pe.id_processo = proc.id_processo_trf;	
	
	IF conta_polo = 0 THEN
	  continue;
	END IF;  
  
  if proc.ds_orgao_julgador is not null Then
    /* XML header */
    --raise notice '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>';

    /* processos */
    --raise notice '<cnj:processos xmlns:cnj="http://www.cnj.jus.br/replicacao-nacional" xmlns="http://www.cnj.jus.br/intercomunicacao-2.2.2">';

    /* processo */

	IF ( proc.cd_classe_judicial = '244') Then
		  proc.cd_classe_judicial := '1202';
	ELSIF ( proc.cd_classe_judicial = '233') Then
		  proc.cd_classe_judicial := '12391';
	ELSIF ( proc.cd_classe_judicial = '307') Then
		  proc.cd_classe_judicial := '1269';
	ELSIF ( proc.cd_classe_judicial = '144') Then
		  proc.cd_classe_judicial := '11555';
	ELSIF ( proc.cd_classe_judicial = '12136') Then
		  proc.cd_classe_judicial := '11875';	  
	END IF;	
	
	localizacaoProcesso := 'GAB';
	
    raise notice '<cnj:processo>';
    
    /* dadosBasicos */
    raise notice '<dadosBasicos nivelSigilo="%" numero="%" classeProcessual="%" codigoLocalidade="%" dataAjuizamento="%" competencia="%" intervencaoMP="%" tamanhoProcesso="%" procEl="1" dscSistema="1">' 
      , proc.nivelSigilo, proc.nr_processo, proc.cd_classe_judicial, proc.id_municipio_ibge_origem, proc.dt_autuacao, coalesce(proc.nu_competencia,0), proc.fl_intervencaoMP, proc.nu_tamanho_bytes;

    FOR polo IN 
    (
      select distinct 
        pp.in_participacao,
        pp.id_tipo_parte,
        
        /*** polo ***/
        /* polo */
        case 
          when pp.in_participacao = 'A' then 'AT' 
          when pp.in_participacao = 'P' then 'PA' 
          when pp.in_participacao = 'T' then 'TC' 
        end in_polo_participacao
      from tb_processo_parte pp 
      WHERE 1=1
        and pp.in_situacao='A'
        and pp.id_tipo_parte <> 7 /* advogado */
        and pp.id_processo_trf = proc.id_processo_trf
    )
    LOOP 
      /* polo */
      raise notice '<polo polo="%">', polo.in_polo_participacao;

      /*
        IMPORTANTE: não estão sendo tratados os casos em que a parte é considerada um interesse público abstrato cuja defesa está a cargo do Ministério Público ou da Defensoria Pública
      */
      FOR parte IN 
      (
        select 
          pp.id_pessoa,
          pp.id_processo_parte,
          (
            select id_parte_representante
            from tb_proc_parte_represntante
            where 1=1
              and id_tipo_representante in (9,47) -- PROCURADOR, REPRESENTANTE
              and id_processo_parte = pp.id_processo_parte
              and pes.in_tipo_pessoa = 'J'
            limit 1
          ) id_pessoa_vinculada,
          (
            select pc.id_parte_representante
            from tb_proc_parte_represntante pc
            inner join tb_processo_parte po on 1=1
              and po.id_processo_parte = pc.id_parte_representante
              and po.in_participacao = 'T'
            where 1=1
              -- REPRESENTANTE(PAIS), ASSISTENTE, SUBSTITUÍDO PROCESSUAL, TUTOR, CURADOR
              and pc.id_tipo_representante in (196,189,208,78,3)
              and pc.id_processo_parte = pp.id_processo_parte
            limit 1
          ) id_pessoa_relacionada,
          (
            select pc.id_parte_representante
            from tb_proc_parte_represntante pc
            inner join tb_processo_parte po on 1=1
              and po.id_processo_parte = pc.id_parte_representante
              and po.in_participacao <> 'T'
            where 1=1
              -- REPRESENTANTE(PAIS), ASSISTENTE, SUBSTITUÍDO PROCESSUAL, TUTOR, CURADOR
              and pc.id_tipo_representante in (196,189,208,78,3)
              and pc.id_processo_parte = pp.id_processo_parte
            limit 1
          ) id_pessoa_proc_relacionada,
          /*
          (
            select *
            from tb_pessoa_juridica
            where 1=1
              and pp.in_participacao = 'A'
              and id_pessoa_juridica = pes.id_pessoa
              and (nm_fantasia ilike '%ministerio publico%' or nm_fantasia ilike '%defensoria%')
          ) fl_interesse_publico,
          */

          /*** parte ***/
          /* assistenciaJudiciaria */
          case when pt.in_justica_gratuita = 'S' then 'true' else 'false' end assistencia_jud,
          /* intimacaoPendente */
          0 nu_intimacaoPendente, /* REVER */
          /* relacionamentoProcessual */
          case 
            when tp.ds_tipo_parte = 'CURADOR' then 'CP'
            when tp.ds_tipo_parte = 'ASSISTENTE' then 'AS'
            when tp.ds_tipo_parte = 'TESTEMUNHA' then 'TF'
            when tp.ds_tipo_parte = 'PROCURADOR' then 'RP'
            when tp.ds_tipo_parte = 'REPRESENTANTE' then 'RP'
            when tp.ds_tipo_parte = 'ASSISTENTE TÉCNICO' then 'AT'
          end cd_rel_processual,

          /*** pessoa ***/
          /* nome */
          ul.ds_nome,
          /* tipoPessoa */
          case when pes.in_tipo_pessoa = 'J' then 'juridica' else 'fisica' end in_tipo_pessoa, 
          /* sexo */
          coalesce(pf.in_sexo, 'D') tp_sexo, 
          /* numeroDocumentoPrincipal */
          (
            select lpad(regexp_replace(nr_documento_identificacao, '[_\.\-/]','','g'), 11 + case when cd_tp_documento_identificacao = 'CPJ' then 3 end, '0') as nr_doc  
            from tb_pess_doc_identificacao 
            where 1=1 
              and id_pessoa = pp.id_pessoa 
              and cd_tp_documento_identificacao IN ('CPF', 'CPJ', 'RIC')
            limit 1
          ) as nr_documento,
          /* nomeGenitor */
          pf.nm_genitor, 
          /* nomeGenitora */
          pf.nm_genitora, 
          /* dataNascimento */
          to_char(pf.dt_nascimento, 'yyyymmdd') dt_nascimento,
          /* dataObito */
          to_char(pf.dt_obito, 'yyyymmdd') dt_obito,
          /* cidadeNatural */
          mu.ds_municipio, 
          /* estadoNatural */
          es.cd_estado,
          /* nacionalidade */
          case when pf.in_brasileiro = 'S' then 'BR' end ds_nacionalidade 
        from tb_processo_trf pt 
        inner join tb_processo_parte pp on 1=1
          and pp.id_processo_trf = pt.id_processo_trf
        inner join tb_tipo_parte tp on 1=1
          and tp.id_tipo_parte = pp.id_tipo_parte
        inner join tb_usuario_login ul on 1=1
          and pp.id_pessoa = ul.id_usuario 
        left join tb_pessoa pes on 1=1
          and pp.id_pessoa = pes.id_pessoa 
        left join tb_pessoa_fisica pf on 1=1
          and pf.id_pessoa_fisica = pes.id_pessoa
        left join tb_municipio mu on 1=1
          and mu.id_municipio = pf.id_municipio_nascimento
        left join tb_estado es on 1=1
          and es.id_estado = mu.id_estado
          and es.cd_estado <> 'XX'
        WHERE 1=1
          and pp.in_situacao='A'
          and pp.id_tipo_parte <> 7 -- advogado
          and pp.in_participacao = polo.in_participacao
          and pt.id_processo_trf = proc.id_processo_trf
      )
      LOOP
        
        -- parte
        raise notice '%', '<parte' 
          /* || ' intimacaoPendente="' || parte.nu_intimacaoPendente || '"' */
          || ' assistenciaJudiciaria="' || parte.assistencia_jud || '"' 
          || coalesce(' relacionamentoProcessual="' || parte.cd_rel_processual || '"', '')
          || '>'
        ;

          /* pessoa */

		  --correção do nome
		  nome_corrigido := replace(replace(parte.ds_nome,'"',''), '&', 'e');
		  
          raise notice '%', '<pessoa'
            --|| ' nome="' || parte.ds_nome || '"'
		    || ' nome="' || initcap(trim(nome_corrigido)) || '"'			
            || ' sexo="' || parte.tp_sexo || '"' 
            || ' tipoPessoa="' || parte.in_tipo_pessoa || '"'
            || coalesce(' dataObito="' || parte.dt_obito || '"', '')
            || coalesce(' nomeGenitor="' || initcap(trim(parte.nm_genitor)) || '"', '')
            || coalesce(' nomeGenitora="' || initcap(trim(parte.nm_genitora)) || '"', '')
            || coalesce(' cidadeNatural="' || initcap(trim(parte.ds_municipio)) || '"', '')
            || coalesce(' estadoNatural="' || parte.cd_estado || '"', '')
            || coalesce(' nacionalidade="' || parte.ds_nacionalidade || '"', '')
            || coalesce(' dataNascimento="' || parte.dt_nascimento || '"', '')
            || coalesce(' numeroDocumentoPrincipal="' || parte.nr_documento || '"', '')
            || '>'
          ;

          -- outroNome 
          -- <outroNome>string</outroNome> /* REVER */
		  conta_doc :=0;
          FOR documento IN 
          (
            select 
              /*** documento ***/
              /* codigoDocumento */
              trim(both ' ' from regexp_replace(pdi.nr_documento_identificacao, '[_\.\-/\r\n]','','g')) nr_documento,
              /* emissorDocumento */
              coalesce(ds_orgao_expedidor, 'Não informado') ds_emissor,
              /* tipoDocumento */
              tpd.tp_doc_selo tp_documento,
              /* nome */
              null ds_nome_diverso /* REVER */
            from tb_pess_doc_identificacao pdi
            inner join 
            (
              select 'CNH' tp_doc_pje, 'CNH' tp_doc_selo union 
              select 'CN' tp_doc_pje, 'CN' tp_doc_selo union 
              select 'PAS' tp_doc_pje, 'PAS' tp_doc_selo union 
              select 'RIC' tp_doc_pje, 'RIC' tp_doc_selo union 
              select 'CEI' tp_doc_pje, 'CEI' tp_doc_selo union 
              select 'NIT' tp_doc_pje, 'NIT' tp_doc_selo union 
              select 'OAB' tp_doc_pje, 'OAB' tp_doc_selo union 
              select 'RJC' tp_doc_pje, 'RJC' tp_doc_selo union 
              select 'RNE' tp_doc_pje, 'RGE' tp_doc_selo union 
              select 'RG' tp_doc_pje, 'CI' tp_doc_selo union 
              select 'TIT' tp_doc_pje, 'TE' tp_doc_selo union 
              select 'CTP' tp_doc_pje, 'CT' tp_doc_selo union 
              select 'PIS' tp_doc_pje, 'PIS_PASEP' tp_doc_selo union 
              select 'CEJ' tp_doc_pje, 'CEI' tp_doc_selo union 
              select 'CRP' tp_doc_pje, 'CP' tp_doc_selo 
            ) tpd on 1=1
              and tpd.tp_doc_pje = pdi.cd_tp_documento_identificacao
            where 1=1
              and pdi.id_pessoa = parte.id_pessoa
          )
          LOOP
            conta_doc := 1;
            raise notice '<documento codigoDocumento="%" tipoDocumento="%" emissorDocumento="%" />'
              , documento.nr_documento, coalesce(documento.tp_documento,'CNH'), documento.ds_emissor;
              
          END LOOP;
		  IF conta_doc = 0 THEN
		       raise notice '<documento codigoDocumento="1" tipoDocumento="CNH" emissorDocumento="NÃO INFORMADO" />';
		  END IF;
          for endereco in 
          (
            select 
              regexp_replace(cp.nr_cep, '[^0-9]', '', 'g') nr_cep,
              trim(coalesce(cd_tipo_logradouro, '') || ' ' || coalesce(en.nm_logradouro, cp.nm_logradouro)) nm_logradouro, 
              en.nr_endereco, 
              en.ds_complemento, 
              coalesce(en.nm_bairro, cp.nm_bairro) nm_bairro, 
              mn.ds_municipio, ibge.id_municipio_ibge,
              es.cd_estado,
              'Brasil' nm_pais
            from tb_processo_parte_endereco pp
            inner join tb_endereco en on 1=1
              and en.id_endereco = pp.id_endereco
            inner join tb_cep cp on 1=1
              and cp.id_cep = en.id_cep
            inner join tb_municipio mn on 1=1
              and mn.id_municipio = cp.id_municipio
			inner join tb_municipio_ibge ibge on 1=1
              and ibge.id_municipio = cp.id_municipio  
            inner join tb_estado es on 1=1
              and es.id_estado = mn.id_estado
            where 1=1
              and pp.id_processo_parte = parte.id_processo_parte
              and not exists
              (
                select 1
                from tb_processo_parte_endereco
                where 1=1
                  and id_processo_parte = pp.id_processo_parte
                  and id_processo_parte_endereco > pp.id_processo_parte_endereco 
              )
          )
          loop

            raise notice '%', '<endereco' || coalesce(' cep="' || nullif(endereco.nr_cep, '') || '"', '') || '>';

            IF endereco.nm_logradouro IS NOT NULL THEN
			  logradouro_corrigido := replace(replace(endereco.nm_logradouro,'"',''), '&', 'e');
			  logradouro_corrigido := initcap(logradouro_corrigido);
			  logradouro_corrigido := replace(logradouro_corrigido,'Rua Rua ','Rua ');
			  logradouro_corrigido := replace(logradouro_corrigido,'Avenida Avenida ','Avenida ');
			  logradouro_corrigido := replace(logradouro_corrigido,'Travessa Travessa ','Travessa ');
			  logradouro_corrigido := replace(logradouro_corrigido,'Estrada Estrada ','Estrada ');
			  logradouro_corrigido := replace(logradouro_corrigido,'Alameda Alameda ','Alameda ');
			  logradouro_corrigido := replace(logradouro_corrigido,'Praca Praca ','Praca ');			  
              raise notice '<logradouro>%</logradouro>', initcap(trim(logradouro_corrigido));
			  logradouro_corrigido := '';
            END IF;

            IF endereco.nr_endereco IS NOT NULL THEN
              raise notice '<numero>%</numero>', coalesce(endereco.nr_endereco,'');
            END IF;

            IF endereco.ds_complemento IS NOT NULL THEN
			  complemento_corrigido := replace(replace(endereco.ds_complemento,'"',''), '&', 'e');
              raise notice '<complemento>%</complemento>', initcap(trim(complemento_corrigido));
            END IF;

            IF endereco.nm_bairro IS NOT NULL THEN
              raise notice '<bairro>%</bairro>', initcap(trim(endereco.nm_bairro));
            END IF;

            IF endereco.ds_municipio IS NOT NULL THEN
              raise notice '<cidade>%</cidade>', initcap(trim(endereco.ds_municipio));
            END IF;

			IF endereco.id_municipio_ibge IS NOT NULL THEN
              raise notice '<codCidade>%</codCidade>', endereco.id_municipio_ibge;
			END IF;  
			  
            IF endereco.cd_estado IS NOT NULL THEN
              raise notice '<estado>%</estado>', endereco.cd_estado;
            END IF;

            IF endereco.nm_pais IS NOT NULL THEN
              raise notice '<pais>%</pais>', initcap(trim(endereco.nm_pais));
            END IF;

            raise notice '</endereco>';

          end loop; -- endereco

          -- pessoaRelacionada
/*		  
          for pessoaRel in
          (
            select 
              pp.id_pessoa,
              pp.id_processo_parte,
              case 
                when tp.ds_tipo_parte = 'TUTOR' then 'T'
                when tp.ds_tipo_parte = 'CURADOR' then 'C'
                when tp.ds_tipo_parte = 'ASSISTENTE' then 'AP'
                when tp.ds_tipo_parte = 'REPRESENTANTE(PAIS)' then 'P'
                when tp.ds_tipo_parte = 'SUBSTITUÍDO PROCESSUAL' then 'SP'
              end cd_modalidade_rel,

              ul.ds_nome,
              case when pes.in_tipo_pessoa = 'J' then 'juridica' else 'fisica' end in_tipo_pessoa, 
              coalesce(pf.in_sexo, 'D') tp_sexo, 
              (
                select lpad(regexp_replace(nr_documento_identificacao, '[_\.\-/]','','g'), 11 + case when cd_tp_documento_identificacao = 'CPJ' then 3 end, '0') as nr_doc  
                from tb_pess_doc_identificacao 
                where 1=1 
                  and id_pessoa = pp.id_pessoa 
                  and cd_tp_documento_identificacao IN ('CPF', 'CPJ', 'RIC')
                limit 1
              ) as nr_documento,
              pf.nm_genitor, 
              pf.nm_genitora, 
              to_char(pf.dt_nascimento, 'yyyymmdd') dt_nascimento,
              to_char(pf.dt_obito, 'yyyymmdd') dt_obito,
              mu.ds_municipio, 
              es.cd_estado,
              case when pf.in_brasileiro = 'S' then 'BR' end ds_nacionalidade 
            from tb_processo_parte pp 
            inner join tb_tipo_parte tp on 1=1
              and tp.id_tipo_parte = pp.id_tipo_parte
            inner join tb_usuario_login ul on 1=1
              and pp.id_pessoa = ul.id_usuario 
            left join tb_pessoa pes on 1=1
              and pp.id_pessoa = pes.id_pessoa 
            left join tb_pessoa_fisica pf on 1=1
              and pf.id_pessoa_fisica = pes.id_pessoa
            left join tb_municipio mu on 1=1
              and mu.id_municipio = pf.id_municipio_nascimento
            left join tb_estado es on 1=1
              and es.id_estado = mu.id_estado
              and es.cd_estado <> 'XX'
            WHERE 1=1
              and pp.in_situacao='A'
              and pp.id_processo_parte = parte.id_pessoa_relacionada
          )
          loop
            raise notice '<pessoaRelacionada modalidadeRelacionamento="%">'
              , pessoaRel.cd_modalidade_rel;

              raise notice '%', '<pessoaRelacionada'
                || ' nome="' || pessoaRel.ds_nome || '"'
                || ' sexo="' || pessoaRel.tp_sexo || '"' 
                || ' tipoPessoa="' || pessoaRel.in_tipo_pessoa || '"'
                || coalesce(' dataObito="' || pessoaRel.dt_obito || '"', '')
                || coalesce(' nomeGenitor="' || pessoaRel.nm_genitor || '"', '')
                || coalesce(' nomeGenitora="' || pessoaRel.nm_genitora || '"', '')
                || coalesce(' cidadeNatural="' || pessoaRel.ds_municipio || '"', '')
                || coalesce(' estadoNatural="' || pessoaRel.cd_estado || '"', '')
                || coalesce(' nacionalidade="' || pessoaRel.ds_nacionalidade || '"', '')
                || coalesce(' dataNascimento="' || pessoaRel.dt_nascimento || '"', '')
                || coalesce(' numeroDocumentoPrincipal="' || pessoaRel.nr_documento || '"', '')
                || '>'
              ;

                FOR documentoRel IN 
                (
                  select 
                    trim(both ' ' from regexp_replace(pdi.nr_documento_identificacao, '[_\.\-/\r\n]','','g')) nr_documento,
                    coalesce(ds_orgao_expedidor, 'Não informado') ds_emissor,
                    tpd.tp_doc_selo tp_documento,
                    null ds_nome_diverso
                  from tb_pess_doc_identificacao pdi
                  inner join 
                  (
                    select 'CNH' tp_doc_pje, 'CNH' tp_doc_selo union 
                    select 'CN' tp_doc_pje, 'CN' tp_doc_selo union 
                    select 'PAS' tp_doc_pje, 'PAS' tp_doc_selo union 
                    select 'RIC' tp_doc_pje, 'RIC' tp_doc_selo union 
                    select 'CEI' tp_doc_pje, 'CEI' tp_doc_selo union 
                    select 'NIT' tp_doc_pje, 'NIT' tp_doc_selo union 
                    select 'OAB' tp_doc_pje, 'OAB' tp_doc_selo union 
                    select 'RJC' tp_doc_pje, 'RJC' tp_doc_selo union 
                    select 'RNE' tp_doc_pje, 'RGE' tp_doc_selo union 
                    select 'RG' tp_doc_pje, 'CI' tp_doc_selo union 
                    select 'TIT' tp_doc_pje, 'TE' tp_doc_selo union 
                    select 'CTP' tp_doc_pje, 'CT' tp_doc_selo union 
                    select 'PIS' tp_doc_pje, 'PIS_PASEP' tp_doc_selo union 
                    select 'CEJ' tp_doc_pje, 'CEI' tp_doc_selo union 
                    select 'CRP' tp_doc_pje, 'CP' tp_doc_selo 
                  ) tpd on 1=1
                    and tpd.tp_doc_pje = pdi.cd_tp_documento_identificacao
                  where 1=1
                    and pdi.id_pessoa = pessoaRel.id_pessoa
                )
                LOOP
                 
                  raise notice '<documento codigoDocumento="%" tipoDocumento="%" emissorDocumento="%" />'
                    , documentoRel.nr_documento, documentoRel.tp_documento, documentoRel.ds_emissor;
                END LOOP;
                for enderecoRel in 
                (
                  select 
                    regexp_replace(cp.nr_cep, '[^0-9]', '', 'g') nr_cep,
                    trim(coalesce(cd_tipo_logradouro, '') || ' ' || coalesce(en.nm_logradouro, cp.nm_logradouro)) nm_logradouro, 
                    en.nr_endereco, 
                    en.ds_complemento, 
                    coalesce(en.nm_bairro, cp.nm_bairro) nm_bairro, 
                    mn.ds_municipio,
                    es.cd_estado,
                    'Brasil' nm_pais
                  from tb_processo_parte_endereco pp
                  inner join tb_endereco en on 1=1
                    and en.id_endereco = pp.id_endereco
                  inner join tb_cep cp on 1=1
                    and cp.id_cep = en.id_cep
                  inner join tb_municipio mn on 1=1
                    and mn.id_municipio = cp.id_municipio
                  inner join tb_estado es on 1=1
                    and es.id_estado = mn.id_estado
                  where 1=1
                    and pp.id_processo_parte = pessoaRel.id_processo_parte
                    and not exists
                    (
                      select 1
                      from tb_processo_parte_endereco
                      where 1=1
                        and id_processo_parte = pp.id_processo_parte
                        and id_processo_parte_endereco > pp.id_processo_parte_endereco 
                    )
                )
                loop

                  raise notice '%', '<endereco' || coalesce(' cep="' || nullif(enderecoRel.nr_cep, '') || '"', '') || '>';

                  IF enderecoRel.nm_logradouro IS NOT NULL THEN
				    logradouro_corrigido := replace(replace(enderecoRel.nm_logradouro,'"',''), '&', 'e');
                    raise notice '<logradouro>%</logradouro>', logradouro_corrigido;
                  END IF;

                  IF enderecoRel.nr_endereco IS NOT NULL THEN
                    raise notice '<numero>%</numero>', enderecoRel.nr_endereco;
                  END IF;

                  IF enderecoRel.ds_complemento IS NOT NULL THEN
				    complemento_corrigido := replace(replace(enderecoRel.ds_complemento,'"',''), '&', 'e');
                    raise notice '<complemento>%</complemento>', complemento_corrigido;
                  END IF;

                  IF enderecoRel.nm_bairro IS NOT NULL THEN
                    raise notice '<bairro>%</bairro>', enderecoRel.nm_bairro;
                  END IF;

                  IF enderecoRel.ds_municipio IS NOT NULL THEN
                    raise notice '<cidade>%</cidade>', enderecoRel.ds_municipio;
                  END IF;

                  IF enderecoRel.cd_estado IS NOT NULL THEN
                    raise notice '<estado>%</estado>', enderecoRel.cd_estado;
                  END IF;

                  IF enderecoRel.nm_pais IS NOT NULL THEN
                    raise notice '<pais>%</pais>', enderecoRel.nm_pais;
                  END IF;

                  raise notice '</endereco>';

                end loop; -- endereco

              raise notice '</pessoaRelacionada>';

            raise notice '</pessoaRelacionada>';
          end loop; -- pessoaRelacionada
*/
          -- pessoaVinculada
          for pessoaVinc in
          (
            select 
              pp.id_pessoa,
              pp.id_processo_parte,

              /*** pessoa ***/
              /* nome */
              ul.ds_nome,
              /* tipoPessoa */
              case when pes.in_tipo_pessoa = 'J' then 'juridica' else 'fisica' end in_tipo_pessoa, 
              /* sexo */
              coalesce(pf.in_sexo, 'D') tp_sexo, 
              /* numeroDocumentoPrincipal */
              (
                select lpad(regexp_replace(nr_documento_identificacao, '[_\.\-/]','','g'), 11 + case when cd_tp_documento_identificacao = 'CPJ' then 3 end, '0') as nr_doc  
                from tb_pess_doc_identificacao 
                where 1=1 
                  and id_pessoa = pp.id_pessoa 
                  and cd_tp_documento_identificacao IN ('CPF', 'CPJ', 'RIC')
                limit 1
              ) as nr_documento,
              /* nomeGenitor */
              pf.nm_genitor, 
              /* nomeGenitora */
              pf.nm_genitora, 
              /* dataNascimento */
              to_char(pf.dt_nascimento, 'yyyymmdd') dt_nascimento,
              /* dataObito */
              to_char(pf.dt_obito, 'yyyymmdd') dt_obito,
              /* cidadeNatural */
              mu.ds_municipio, 
              /* estadoNatural */
              es.cd_estado,
              /* nacionalidade */
              case when pf.in_brasileiro = 'S' then 'BR' end ds_nacionalidade 
            from tb_processo_parte pp 
            inner join tb_usuario_login ul on 1=1
              and pp.id_pessoa = ul.id_usuario 
            left join tb_pessoa pes on 1=1
              and pp.id_pessoa = pes.id_pessoa 
            left join tb_pessoa_fisica pf on 1=1
              and pf.id_pessoa_fisica = pes.id_pessoa
            left join tb_municipio mu on 1=1
              and mu.id_municipio = pf.id_municipio_nascimento
            left join tb_estado es on 1=1
              and es.id_estado = mu.id_estado
              and es.cd_estado <> 'XX'
            WHERE 1=1
              and pp.in_situacao='A'
              and pp.id_processo_parte = parte.id_pessoa_vinculada
          )
          loop

            raise notice '%', '<pessoaVinculada'
              || ' nome="' || initcap(trim(pessoaVinc.ds_nome)) || '"'
              || ' sexo="' || pessoaVinc.tp_sexo || '"' 
              || ' tipoPessoa="' || pessoaVinc.in_tipo_pessoa || '"'
              || coalesce(' dataObito="' || pessoaVinc.dt_obito || '"', '')
              || coalesce(' nomeGenitor="' || initcap(trim(pessoaVinc.nm_genitor)) || '"', '')
              || coalesce(' nomeGenitora="' || initcap(trim(pessoaVinc.nm_genitora)) || '"', '')
              || coalesce(' cidadeNatural="' || initcap(trim(pessoaVinc.ds_municipio)) || '"', '')
              || coalesce(' estadoNatural="' || pessoaVinc.cd_estado || '"', '')
              || coalesce(' nacionalidade="' || pessoaVinc.ds_nacionalidade || '"', '')
              || coalesce(' dataNascimento="' || pessoaVinc.dt_nascimento || '"', '')
              || coalesce(' numeroDocumentoPrincipal="' || pessoaVinc.nr_documento || '"', '')
              || '>'
            ;

              -- documento
			  conta_doc := 0;
              FOR documentoVinc IN 
              (
                select 
                  /*** documento ***/
                  /* codigoDocumento */
                  trim(both ' ' from regexp_replace(pdi.nr_documento_identificacao, '[_\.\-/\r\n]','','g')) nr_documento,
                  /* emissorDocumento */
                  coalesce(ds_orgao_expedidor, 'Não informado') ds_emissor,
                  /* tipoDocumento */
                  tpd.tp_doc_selo tp_documento,
                  /* nome */
                  null ds_nome_diverso /* REVER */
                from tb_pess_doc_identificacao pdi
                inner join 
                (
                  select 'CNH' tp_doc_pje, 'CNH' tp_doc_selo union 
                  select 'CN' tp_doc_pje, 'CN' tp_doc_selo union 
                  select 'PAS' tp_doc_pje, 'PAS' tp_doc_selo union 
                  select 'RIC' tp_doc_pje, 'RIC' tp_doc_selo union 
                  select 'CEI' tp_doc_pje, 'CEI' tp_doc_selo union 
                  select 'NIT' tp_doc_pje, 'NIT' tp_doc_selo union 
                  select 'OAB' tp_doc_pje, 'OAB' tp_doc_selo union 
                  select 'RJC' tp_doc_pje, 'RJC' tp_doc_selo union 
                  select 'RNE' tp_doc_pje, 'RGE' tp_doc_selo union 
                  select 'RG' tp_doc_pje, 'CI' tp_doc_selo union 
                  select 'TIT' tp_doc_pje, 'TE' tp_doc_selo union 
                  select 'CTP' tp_doc_pje, 'CT' tp_doc_selo union 
                  select 'PIS' tp_doc_pje, 'PIS_PASEP' tp_doc_selo union 
                  select 'CEJ' tp_doc_pje, 'CEI' tp_doc_selo union 
                  select 'CRP' tp_doc_pje, 'CP' tp_doc_selo 
                ) tpd on 1=1
                  and tpd.tp_doc_pje = pdi.cd_tp_documento_identificacao
                where 1=1
                  and pdi.id_pessoa = pessoaVinc.id_pessoa
              )
              LOOP
                conta_doc := 1;
                raise notice '<documento codigoDocumento="%" tipoDocumento="%" emissorDocumento="%" />'
                  , documentoVinc.nr_documento, coalesce(documentoVinc.tp_documento,'CNH'), documentoVinc.ds_emissor;
                  
              END LOOP;
			  IF conta_doc = 0 THEN
				   raise notice '<documento codigoDocumento="1" tipoDocumento="CNH" emissorDocumento="NÃO INFORMADO" />';
			  END IF;
              -- endereco
              for enderecoVinc in 
              (
                select 
                  /*** endereco ***/
                  /* cep */
                  regexp_replace(cp.nr_cep, '[^0-9]', '', 'g') nr_cep,

                  /*** logradouro ***/
                  trim(coalesce(cd_tipo_logradouro, '') || ' ' || coalesce(en.nm_logradouro, cp.nm_logradouro)) nm_logradouro, 
                  /*** numero ***/
                  en.nr_endereco, 
                  /*** complemento ***/
                  en.ds_complemento, 
                  /*** bairro ***/
                  coalesce(en.nm_bairro, cp.nm_bairro) nm_bairro, 
                  /*** cidade ***/
                  mn.ds_municipio, ibge.id_municipio_ibge,
                  /*** estado ***/
                  es.cd_estado,
                  /*** pais ***/
                  'Brasil' nm_pais
                from tb_processo_parte_endereco pp
                inner join tb_endereco en on 1=1
                  and en.id_endereco = pp.id_endereco
                inner join tb_cep cp on 1=1
                  and cp.id_cep = en.id_cep
                inner join tb_municipio mn on 1=1
                  and mn.id_municipio = cp.id_municipio
				inner join tb_municipio_ibge ibge on 1=1
                  and ibge.id_municipio = cp.id_municipio  
                inner join tb_estado es on 1=1
                  and es.id_estado = mn.id_estado
                where 1=1
                  and pp.id_processo_parte = pessoaVinc.id_processo_parte
                  and not exists
                  (
                    select 1
                    from tb_processo_parte_endereco
                    where 1=1
                      and id_processo_parte = pp.id_processo_parte
                      and id_processo_parte_endereco > pp.id_processo_parte_endereco 
                  )
              )
              loop

                raise notice '%', '<endereco' || coalesce(' cep="' || nullif(enderecoVinc.nr_cep, '') || '"', '') || '>';

                IF enderecoVinc.nm_logradouro IS NOT NULL THEN
					logradouro_corrigido := replace(replace(enderecoVinc.nm_logradouro,'"',''), '&', 'e');
					logradouro_corrigido := initcap(logradouro_corrigido);
					logradouro_corrigido := replace(logradouro_corrigido,'Rua Rua ','Rua ');
					logradouro_corrigido := replace(logradouro_corrigido,'Avenida Avenida ','Avenida ');
					logradouro_corrigido := replace(logradouro_corrigido,'Travessa Travessa ','Travessa ');
					logradouro_corrigido := replace(logradouro_corrigido,'Estrada Estrada ','Estrada ');
					logradouro_corrigido := replace(logradouro_corrigido,'Alameda Alameda ','Alameda ');
                  raise notice '<logradouro>%</logradouro>', initcap(trim(logradouro_corrigido));
				  logradouro_corrigido := '';
                END IF;

                IF enderecoVinc.nr_endereco IS NOT NULL THEN
                  raise notice '<numero>%</numero>', enderecoVinc.nr_endereco;
                END IF;

                IF enderecoVinc.ds_complemento IS NOT NULL THEN
				  complemento_corrigido := replace(replace(enderecoVinc.ds_complemento,'"',''), '&', 'e');
                  raise notice '<complemento>%</complemento>', initcap(trim(complemento_corrigido));
                END IF;

                IF enderecoVinc.nm_bairro IS NOT NULL THEN
                  raise notice '<bairro>%</bairro>', initcap(trim(enderecoVinc.nm_bairro));
                END IF;

                IF enderecoVinc.ds_municipio IS NOT NULL THEN
                  raise notice '<cidade>%</cidade>', initcap(trim(enderecoVinc.ds_municipio));
                END IF;
				
				IF enderecoVinc.id_municipio_ibge IS NOT NULL THEN
				  raise notice '<codCidade>%</codCidade>', enderecoVinc.id_municipio_ibge;
				END IF;

                IF enderecoVinc.cd_estado IS NOT NULL THEN
                  raise notice '<estado>%</estado>', enderecoVinc.cd_estado;
                END IF;

                IF enderecoVinc.nm_pais IS NOT NULL THEN
                  raise notice '<pais>%</pais>', initcap(trim(enderecoVinc.nm_pais));
                END IF;

                raise notice '</endereco>';

              end loop; -- endereco

            raise notice '</pessoaVinculada>';
          end loop; -- pessoaVinculada

          raise notice '</pessoa>';

          -- interessePublico /* REVER */
          -- <interessePublico>string</interessePublico>

          -- advogado
          for advogado in 
          (
            select 
              pr.id_parte_representante,

              /*** advogado ***/
              /* nome */
              ul.ds_nome, 
              /* inscricao */
              es.cd_estado || case when trim(pa.nr_oab) ~ '^[0-9]+$' then lpad(trim(pa.nr_oab), 7, '0') end || nullif(pa.ds_letra_oab, ' ') ds_inscricao,
              /* numeroDocumentoPrincipal */ 
              (
                SELECT trim(both ' ' from regexp_replace(nr_documento_identificacao, '[_\.\-/]','','g')) nr_documento
                FROM tb_pess_doc_identificacao 
                WHERE 1=1
                  and id_pessoa = pa.id
                  and 'S' = in_ativo 
                  and 'N' = in_usado_falsamente
                  and 'CPF' = upper(cd_tp_documento_identificacao) 
                ORDER BY id_pessoa_doc_identificacao DESC
                LIMIT 1
              ) AS nr_documento,
              /* intimacao 
                select * -- distinct pe.id_tipo_processo_documento -- count(*) -- count(distinct id_pessoa_ciencia)
                from tb_processo_expediente pe 
                inner join tb_proc_parte_expediente pp on 1=1
                  and pp.id_processo_expediente = pe.id_processo_expediente
                inner join tb_pessoa_advogado pa on 1=1
                  and pa.id = pp.id_pessoa_ciencia
                limit 100
              */
              'false'::varchar fl_intimacao, /* REVER */
              /* tipoRepresentante */ 
              case /* REVER */
                when pc.ds_nome ilike 'Procuradoria Regional do Trabalho%' then 'M'
                when pc.ds_nome ilike '%/AGU' then 'P' 
                else 'A'
              end cd_tipo_representante
            from tb_proc_parte_represntante pr
            inner join tb_pessoa_advogado pa on 1=1
              and pa.id = pr.id_representante
            inner join tb_estado es on 1=1
              and pa.id_uf_oab = es.id_estado
            inner join tb_usuario_login ul on 1=1
              and ul.id_usuario = pa.id
            left join tb_pessoa_procurador pp on 1=1
              and pp.id = pr.id_representante
            left join tb_procuradoria pc on 1=1
              and pc.id_procuradoria = pp.id_procuradoria
            where 1=1
              and pr.id_processo_parte = parte.id_processo_parte
              and pr.in_situacao = 'A'
              and pr.id_tipo_representante = 7 -- ADVOGADO
          )
          loop

            raise notice '%', '<advogado'
              || ' nome="' || initcap(trim(advogado.ds_nome)) || '"'
              || ' intimacao="' || advogado.fl_intimacao || '"'
              || ' tipoRepresentante="' || advogado.cd_tipo_representante || '"'
              || coalesce(' inscricao="' || advogado.ds_inscricao || '"', '')
              || coalesce(' numeroDocumentoPrincipal="' || advogado.nr_documento || '"', '')
              || '>'
            ;

              -- endereco
              for enderecoAdv in 
              (
                select 
                  /*** endereco ***/
                  /* cep */
                  regexp_replace(cp.nr_cep, '[^0-9]', '', 'g') nr_cep,

                  /*** logradouro ***/
                  trim(coalesce(cd_tipo_logradouro, '') || ' ' || coalesce(en.nm_logradouro, cp.nm_logradouro)) nm_logradouro, 
                  /*** numero ***/
                  en.nr_endereco, 
                  /*** complemento ***/
                  en.ds_complemento, 
                  /*** bairro ***/
                  coalesce(en.nm_bairro, cp.nm_bairro) nm_bairro, 
                  /*** cidade ***/
                  mn.ds_municipio, ibge.id_municipio_ibge,
                  /*** estado ***/
                  es.cd_estado,
                  /*** pais ***/
                  'Brasil' nm_pais
                from tb_processo_parte_endereco pp
                inner join tb_endereco en on 1=1
                  and en.id_endereco = pp.id_endereco
                inner join tb_cep cp on 1=1
                  and cp.id_cep = en.id_cep
                inner join tb_municipio mn on 1=1
                  and mn.id_municipio = cp.id_municipio
				inner join tb_municipio_ibge ibge on 1=1
                  and ibge.id_municipio = cp.id_municipio  
                inner join tb_estado es on 1=1
                  and es.id_estado = mn.id_estado
                where 1=1
                  and pp.id_processo_parte = advogado.id_parte_representante
                  and not exists
                  (
                    select 1
                    from tb_processo_parte_endereco
                    where 1=1
                      and id_processo_parte = pp.id_processo_parte
                      and id_processo_parte_endereco > pp.id_processo_parte_endereco 
                  )
              )
              loop

                raise notice '%', '<endereco' || coalesce(' cep="' || nullif(enderecoAdv.nr_cep, '') || '"', '') || '>';

                IF enderecoAdv.nm_logradouro IS NOT NULL THEN
				  logradouro_corrigido := replace(replace(enderecoAdv.nm_logradouro,'"',''), '&', 'e');
				  logradouro_corrigido := initcap(logradouro_corrigido);
				  logradouro_corrigido := replace(logradouro_corrigido,'Rua Rua ','Rua ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Avenida Avenida ','Avenida ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Travessa Travessa ','Travessa ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Estrada Estrada ','Estrada ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Alameda Alameda ','Alameda ');
                  raise notice '<logradouro>%</logradouro>', initcap(trim(logradouro_corrigido));
				  logradouro_corrigido := '';
                END IF;

                IF enderecoAdv.nr_endereco IS NOT NULL THEN
                  raise notice '<numero>%</numero>', enderecoAdv.nr_endereco;
                END IF;

                IF enderecoAdv.ds_complemento IS NOT NULL THEN
				  complemento_corrigido := replace(replace(enderecoAdv.ds_complemento,'"',''), '&', 'e');
                  raise notice '<complemento>%</complemento>', initcap(trim(complemento_corrigido));
                END IF;

                IF enderecoAdv.nm_bairro IS NOT NULL THEN
                  raise notice '<bairro>%</bairro>', initcap(trim(enderecoAdv.nm_bairro));
                END IF;

                IF enderecoAdv.ds_municipio IS NOT NULL THEN
                  raise notice '<cidade>%</cidade>', initcap(trim(enderecoAdv.ds_municipio));
                END IF;
				
				IF enderecoAdv.id_municipio_ibge IS NOT NULL THEN
				  raise notice '<codCidade>%</codCidade>', enderecoAdv.id_municipio_ibge;
				END IF;

                IF enderecoAdv.cd_estado IS NOT NULL THEN
                  raise notice '<estado>%</estado>', enderecoAdv.cd_estado;
                END IF;

                IF enderecoAdv.nm_pais IS NOT NULL THEN
                  raise notice '<pais>%</pais>', initcap(trim(enderecoAdv.nm_pais));
                END IF;

                raise notice '</endereco>';

              end loop; -- enderecoAdv
          
            raise notice '</advogado>';

          end loop; -- advogado

          -- pessoaProcessualRelacionada
          FOR parteProcRel IN 
          (
            select 
              pp.id_pessoa,
              pp.id_processo_parte,

              /*** parte ***/
              /* assistenciaJudiciaria */
              case when pt.in_justica_gratuita = 'S' then 'true' else 'false' end assistencia_jud,
              /* intimacaoPendente */
              0 nu_intimacaoPendente, /* REVER */
              /* relacionamentoProcessual */
              case 
                when tp.ds_tipo_parte = 'CURADOR' then 'CP'
                when tp.ds_tipo_parte = 'ASSISTENTE' then 'AS'
                when tp.ds_tipo_parte = 'TESTEMUNHA' then 'TF'
                when tp.ds_tipo_parte = 'PROCURADOR' then 'RP'
                when tp.ds_tipo_parte = 'REPRESENTANTE' then 'RP'
                when tp.ds_tipo_parte = 'ASSISTENTE TÉCNICO' then 'AT'
              end cd_rel_processual,

              /*** pessoa ***/
              /* nome */
              ul.ds_nome,
              /* tipoPessoa */
              case when pes.in_tipo_pessoa = 'J' then 'juridica' else 'fisica' end in_tipo_pessoa, 
              /* sexo */
              coalesce(pf.in_sexo, 'D') tp_sexo, 
              /* numeroDocumentoPrincipal */
              (
                select lpad(regexp_replace(nr_documento_identificacao, '[_\.\-/]','','g'), 11 + case when cd_tp_documento_identificacao = 'CPJ' then 3 end, '0') as nr_doc  
                from tb_pess_doc_identificacao 
                where 1=1 
                  and id_pessoa = pp.id_pessoa 
                  and cd_tp_documento_identificacao IN ('CPF', 'CPJ', 'RIC')
                limit 1
              ) as nr_documento,
              /* nomeGenitor */
              pf.nm_genitor, 
              /* nomeGenitora */
              pf.nm_genitora, 
              /* dataNascimento */
              to_char(pf.dt_nascimento, 'yyyymmdd') dt_nascimento,
              /* dataObito */
              to_char(pf.dt_obito, 'yyyymmdd') dt_obito,
              /* cidadeNatural */
              mu.ds_municipio, 
              /* estadoNatural */
              es.cd_estado,
              /* nacionalidade */
              case when pf.in_brasileiro = 'S' then 'BR' end ds_nacionalidade 
            from tb_processo_parte pp 
            inner join tb_processo_trf pt on 1=1
              and pt.id_processo_trf = pp.id_processo_trf
            inner join tb_tipo_parte tp on 1=1
              and tp.id_tipo_parte = pp.id_tipo_parte
            inner join tb_usuario_login ul on 1=1
              and pp.id_pessoa = ul.id_usuario 
            left join tb_pessoa pes on 1=1
              and pp.id_pessoa = pes.id_pessoa 
            left join tb_pessoa_fisica pf on 1=1
              and pf.id_pessoa_fisica = pes.id_pessoa
            left join tb_municipio mu on 1=1
              and mu.id_municipio = pf.id_municipio_nascimento
            left join tb_estado es on 1=1
              and es.id_estado = mu.id_estado
              and es.cd_estado <> 'XX'
            WHERE 1=1
              and pp.in_situacao='A'
              and pp.id_tipo_parte <> 7 -- advogado
              and pp.id_processo_parte = parte.id_pessoa_proc_relacionada
          )
          LOOP
            
            -- parte
            raise notice '%', '<pessoaProcessualRelacionada' 
              /* || ' intimacaoPendente="' || parteProcRel.nu_intimacaoPendente || '"' */
              || ' assistenciaJudiciaria="' || parteProcRel.assistencia_jud || '"' 
              || coalesce(' relacionamentoProcessual="' || parteProcRel.cd_rel_processual || '"', '')
              || '>'
            ;

              /* pessoa */
              raise notice '%', '<pessoa'
                || ' nome="' || initcap(trim(parteProcRel.ds_nome)) || '"'
                || ' sexo="' || parteProcRel.tp_sexo || '"' 
                || ' tipoPessoa="' || parteProcRel.in_tipo_pessoa || '"'
                || coalesce(' dataObito="' || parteProcRel.dt_obito || '"', '')
                || coalesce(' nomeGenitor="' || initcap(trim(parteProcRel.nm_genitor)) || '"', '')
                || coalesce(' nomeGenitora="' || initcap(trim(parteProcRel.nm_genitora)) || '"', '')
                || coalesce(' cidadeNatural="' || initcap(trim(parteProcRel.ds_municipio)) || '"', '')
                || coalesce(' estadoNatural="' || parteProcRel.cd_estado || '"', '')
                || coalesce(' nacionalidade="' || parteProcRel.ds_nacionalidade || '"', '')
                || coalesce(' dataNascimento="' || parteProcRel.dt_nascimento || '"', '')
                || coalesce(' numeroDocumentoPrincipal="' || parteProcRel.nr_documento || '"', '')
                || '>'
              ;
			  conta_doc := 0;
              FOR documentoProcRel IN 
              (
                select 
                  /*** documento ***/
                  /* codigoDocumento */
                  trim(both ' ' from regexp_replace(pdi.nr_documento_identificacao, '[_\.\-/\r\n]','','g')) nr_documento,
                  /* emissorDocumento */
                  coalesce(ds_orgao_expedidor, 'Não informado') ds_emissor,
                  /* tipoDocumento */
                  tpd.tp_doc_selo tp_documento,
                  /* nome */
                  null ds_nome_diverso /* REVER */
                from tb_pess_doc_identificacao pdi
                inner join 
                (
                  select 'CNH' tp_doc_pje, 'CNH' tp_doc_selo union 
                  select 'CN' tp_doc_pje, 'CN' tp_doc_selo union 
                  select 'PAS' tp_doc_pje, 'PAS' tp_doc_selo union 
                  select 'RIC' tp_doc_pje, 'RIC' tp_doc_selo union 
                  select 'CEI' tp_doc_pje, 'CEI' tp_doc_selo union 
                  select 'NIT' tp_doc_pje, 'NIT' tp_doc_selo union 
                  select 'OAB' tp_doc_pje, 'OAB' tp_doc_selo union 
                  select 'RJC' tp_doc_pje, 'RJC' tp_doc_selo union 
                  select 'RNE' tp_doc_pje, 'RGE' tp_doc_selo union 
                  select 'RG' tp_doc_pje, 'CI' tp_doc_selo union 
                  select 'TIT' tp_doc_pje, 'TE' tp_doc_selo union 
                  select 'CTP' tp_doc_pje, 'CT' tp_doc_selo union 
                  select 'PIS' tp_doc_pje, 'PIS_PASEP' tp_doc_selo union 
                  select 'CEJ' tp_doc_pje, 'CEI' tp_doc_selo union 
                  select 'CRP' tp_doc_pje, 'CP' tp_doc_selo 
                ) tpd on 1=1
                  and tpd.tp_doc_pje = pdi.cd_tp_documento_identificacao
                where 1=1
                  and pdi.id_pessoa = parteProcRel.id_pessoa
              )
              LOOP
                conta_doc := 1;
                raise notice '<documento codigoDocumento="%" tipoDocumento="%" emissorDocumento="%" />'
                  , documentoProcRel.nr_documento, coalesce(documentoProcRel.tp_documento,'CNH'), documentoProcRel.ds_emissor;
                  
              END LOOP;
			  IF conta_doc = 0 THEN
				   raise notice '<documento codigoDocumento="1" tipoDocumento="CNH" emissorDocumento="NÃO INFORMADO" />';
			  END IF;
              -- endereco
              for enderecoProcRel in 
              (
                select 
                  /*** endereco ***/
                  /* cep */
                  regexp_replace(cp.nr_cep, '[^0-9]', '', 'g') nr_cep,

                  /*** logradouro ***/
                  trim(coalesce(cd_tipo_logradouro, '') || ' ' || coalesce(en.nm_logradouro, cp.nm_logradouro)) nm_logradouro, 
                  /*** numero ***/
                  en.nr_endereco, 
                  /*** complemento ***/
                  en.ds_complemento, 
                  /*** bairro ***/
                  coalesce(en.nm_bairro, cp.nm_bairro) nm_bairro, 
                  /*** cidade ***/
                  mn.ds_municipio, ibge.id_municipio_ibge,
                  /*** estado ***/
                  es.cd_estado,
                  /*** pais ***/
                  'Brasil' nm_pais
                from tb_processo_parte_endereco pp
                inner join tb_endereco en on 1=1
                  and en.id_endereco = pp.id_endereco
                inner join tb_cep cp on 1=1
                  and cp.id_cep = en.id_cep
                inner join tb_municipio mn on 1=1
                  and mn.id_municipio = cp.id_municipio
				inner join tb_municipio_ibge ibge on 1=1
                  and ibge.id_municipio = cp.id_municipio  
                inner join tb_estado es on 1=1
                  and es.id_estado = mn.id_estado
                where 1=1
                  and pp.id_processo_parte = parteProcRel.id_processo_parte
                  and not exists
                  (
                    select 1
                    from tb_processo_parte_endereco
                    where 1=1
                      and id_processo_parte = pp.id_processo_parte
                      and id_processo_parte_endereco > pp.id_processo_parte_endereco 
                  )
              )
              loop

                raise notice '%', '<endereco' || coalesce(' cep="' || nullif(enderecoProcRel.nr_cep, '') || '"', '') || '>';
				
                IF enderecoProcRel.nm_logradouro IS NOT NULL THEN
				  logradouro_corrigido := replace(replace(enderecoProcRel.nm_logradouro,'"',''), '&', 'e');
				  logradouro_corrigido := initcap(logradouro_corrigido);
				  logradouro_corrigido := replace(logradouro_corrigido,'Rua Rua ','Rua ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Avenida Avenida ','Avenida ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Travessa Travessa ','Travessa ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Estrada Estrada ','Estrada ');
				  logradouro_corrigido := replace(logradouro_corrigido,'Alameda Alameda ','Alameda ');
                  raise notice '<logradouro>%</logradouro>', initcap(trim(logradouro_corrigido));
				  logradouro_corrigido := '';
                END IF;

                IF enderecoProcRel.nr_endereco IS NOT NULL THEN
                  raise notice '<numero>%</numero>', enderecoProcRel.nr_endereco;
                END IF;

                IF enderecoProcRel.ds_complemento IS NOT NULL THEN
				  complemento_corrigido := replace(replace(enderecoProcRel.ds_complemento,'"',''), '&', 'e');
                  raise notice '<complemento>%</complemento>', initcap(trim(complemento_corrigido));
                END IF;

                IF enderecoProcRel.nm_bairro IS NOT NULL THEN
                  raise notice '<bairro>%</bairro>', initcap(trim(enderecoProcRel.nm_bairro));
                END IF;

                IF enderecoProcRel.ds_municipio IS NOT NULL THEN
                  raise notice '<cidade>%</cidade>', initcap(trim(enderecoProcRel.ds_municipio));
                END IF;
				
				IF enderecoProcRel.id_municipio_ibge IS NOT NULL THEN
				  raise notice '<codCidade>%</codCidade>', enderecoProcRel.id_municipio_ibge;
				END IF;

                IF enderecoProcRel.cd_estado IS NOT NULL THEN
                  raise notice '<estado>%</estado>', enderecoProcRel.cd_estado;
                END IF;

                IF enderecoProcRel.nm_pais IS NOT NULL THEN
                  raise notice '<pais>%</pais>', initcap(trim(enderecoProcRel.nm_pais));
                END IF;

                raise notice '</endereco>';

              end loop; -- endereco

              raise notice '</pessoa>';

            raise notice '</pessoaProcessualRelacionada>';
          END LOOP; -- pessoaProcessualRelacionada

        raise notice '</parte>';

      END LOOP;

      raise notice '</polo>';
    END LOOP;
    
	cd_assunto_trf_anterior := '0';
	conta_assunto := 0;
	
	-- ASSUNTO ATUALIZADO
	
    FOR assunto IN 
    (
	
      select case when pa.in_assunto_principal = 'S' then 'true' else 'false' end in_assunto_principal, 
             fil.cd_assunto_trf, fil.ds_assunto_trf, pai.cd_assunto_trf cd_assunto_pai, pai.ds_assunto_trf
      from   tb_processo_assunto pa,
	         tb_assunto_trf fil,
	         tb_assunto_trf pai
	  where	 pa.id_processo_trf = proc.id_processo_trf
	  and    fil.id_assunto_trf = pa.id_assunto_trf
	  and	 pai.id_assunto_trf = fil.id_assunto_trf_superior	
	
	)
	LOOP
	IF assunto.cd_assunto_trf in ('3','32','1128','1129','1134','1140','1142','1145','1147','1149','1150','1153','1154','1161','1164','1169','1178',
		'1180','1182','1186','1189','1190','1191','1193','1194','1195','1197','1200','1201','1446','1451','1454','1466','1467',
		'1468','1469','1470','1472','1479','1480','1482','1488','1491','1498','1508','1514','1516','1517','1518','1521','1522',
		'1523','1524','1525','1528','1531','1532','1797','1800','1801','1874','1878','1881','1884','1890','1893','2314','2322',
		'2324','2428','2431','3740','4537','4538','4539','4548','4558','4584','4585','4586','4593','4688','4690','4691','4697',
		'4712','4715','4727','4749','4750','4751','4752','4753','4755','4756','4760','4762','4765','4767','4769','4770','4789',
		'4792','4834','4835','4845','4849','4869','4870','4882','4919','4946','4947','4953','5017','5030','5050','5053','5071',
		'5072','5077','5094','5107','5116','5117','5121','5126','5134','5140','5142','5171','5178','5180','5192','5200','5206',
		'5215','5222','5223','8890','55077','55108','55218','55254','55309','55345','55349','55405','55492','55508','55549','55604','55639',
		'2029','2033','5352','2086','2037','1666','2554','2140','1663','2426','2031','1844','2139','1654','1957','1661','5354','1966',
		'2116','11781','1806','2523','1658','2537','5272','10581','1816','1807','1932','2233','2670','1814','1822','2266','2409','2445',
		'5273','10737','10861','2421','7647','11858',
		'2546','1855','2478','2458','8808','2594','2055','2656','10568') THEN
		continue;
	END IF;  
	
	IF assunto.cd_assunto_trf in ('1773','10564','1690','1703','4452','1705','1691') THEN
	  assunto.cd_assunto_pai := '1697';
	ELSIF assunto.cd_assunto_trf = '11858' THEN
	  assunto.cd_assunto_pai := '10288';
	END IF;  	
	
	if conta_assunto = 0 THEN
	  if assunto.in_assunto_principal = 'false' Then
	    assunto.in_assunto_principal := 'true';
	  end if;
    else
	  if assunto.in_assunto_principal = 'true' Then	
	    assunto.in_assunto_principal := 'false';
	  end if;	
	end if;
	
	conta_assunto := conta_assunto + 1;	
	--ACERTO DOS ASSUNTOS

If (assunto.cd_assunto_trf ='55000') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55001') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55006') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55007') then assunto.cd_assunto_pai := '4435';
Elsif (assunto.cd_assunto_trf ='55008') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55009') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55010') then assunto.cd_assunto_pai := '2622';
Elsif (assunto.cd_assunto_trf ='55011') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55012') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55013') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55014') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55015') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55016') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55017') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55018') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55019') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55020') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55021') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55022') then assunto.cd_assunto_pai := '1697';
Elsif (assunto.cd_assunto_trf ='55023') then assunto.cd_assunto_pai := '1697';
Elsif (assunto.cd_assunto_trf ='55024') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55025') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55026') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55027') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55028') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55029') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55030') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55031') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55032') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55034') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55035') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55036') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55037') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55038') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55039') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55040') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55041') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55042') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55043') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55044') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55045') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55047') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55048') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55049') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55050') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55051') then assunto.cd_assunto_pai := '5297';
Elsif (assunto.cd_assunto_trf ='55052') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55053') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55054') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55055') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55056') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55057') then assunto.cd_assunto_pai := '5272';
Elsif (assunto.cd_assunto_trf ='55058') then assunto.cd_assunto_pai := '5272';
Elsif (assunto.cd_assunto_trf ='55059') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55060') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55061') then assunto.cd_assunto_pai := '2445';
Elsif (assunto.cd_assunto_trf ='55062') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55063') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55064') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55065') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55066') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55067') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55068') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55069') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55070') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55071') then assunto.cd_assunto_pai := '2554';
Elsif (assunto.cd_assunto_trf ='55072') then assunto.cd_assunto_pai := '2554';
Elsif (assunto.cd_assunto_trf ='55073') then assunto.cd_assunto_pai := '2554';
Elsif (assunto.cd_assunto_trf ='55074') then assunto.cd_assunto_pai := '2554';
Elsif (assunto.cd_assunto_trf ='55075') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55076') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55077') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55078') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55079') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55080') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55081') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55082') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55087') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55088') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55089') then assunto.cd_assunto_pai := '1697';
Elsif (assunto.cd_assunto_trf ='55090') then assunto.cd_assunto_pai := '1697';
Elsif (assunto.cd_assunto_trf ='55091') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55092') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55093') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55094') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55095') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55097') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55098') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55099') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55100') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55101') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55102') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55103') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55104') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55105') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55106') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55107') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55108') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55109') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55110') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55111') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55112') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55113') then assunto.cd_assunto_pai := '2662';
Elsif (assunto.cd_assunto_trf ='55114') then assunto.cd_assunto_pai := '2019';
Elsif (assunto.cd_assunto_trf ='55115') then assunto.cd_assunto_pai := '2662';
Elsif (assunto.cd_assunto_trf ='55116') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55117') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55118') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55119') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55120') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55121') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55122') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55123') then assunto.cd_assunto_pai := '7629';
Elsif (assunto.cd_assunto_trf ='55124') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55126') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55127') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55128') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55129') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55130') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55131') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55134') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55135') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55136') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55138') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55139') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55140') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55142') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55143') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55144') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55145') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55146') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55147') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55148') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55149') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55150') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55151') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55152') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55153') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55154') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55155') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55156') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55157') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55158') then assunto.cd_assunto_pai := '1920';
Elsif (assunto.cd_assunto_trf ='55159') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55160') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55161') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55162') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55163') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55164') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55165') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55166') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55167') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55168') then assunto.cd_assunto_pai := '8818';
Elsif (assunto.cd_assunto_trf ='55169') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55170') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55171') then assunto.cd_assunto_pai := '2331';
Elsif (assunto.cd_assunto_trf ='55172') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55173') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55174') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55175') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55176') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55177') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55178') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55179') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55180') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55181') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55182') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55183') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55184') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55185') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55186') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55188') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55189') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55191') then assunto.cd_assunto_pai := '2697';
Elsif (assunto.cd_assunto_trf ='55192') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55193') then assunto.cd_assunto_pai := '1904';
Elsif (assunto.cd_assunto_trf ='55194') then assunto.cd_assunto_pai := '1904';
Elsif (assunto.cd_assunto_trf ='55195') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55196') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55197') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55198') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55199') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55200') then assunto.cd_assunto_pai := '1907';
Elsif (assunto.cd_assunto_trf ='55202') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55203') then assunto.cd_assunto_pai := '2243';
Elsif (assunto.cd_assunto_trf ='55204') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55205') then assunto.cd_assunto_pai := '2656';
Elsif (assunto.cd_assunto_trf ='55206') then assunto.cd_assunto_pai := '2656';
Elsif (assunto.cd_assunto_trf ='55207') then assunto.cd_assunto_pai := '2656';
Elsif (assunto.cd_assunto_trf ='55208') then assunto.cd_assunto_pai := '1998';
Elsif (assunto.cd_assunto_trf ='55209') then assunto.cd_assunto_pai := '2567';
Elsif (assunto.cd_assunto_trf ='55210') then assunto.cd_assunto_pai := '8808';
Elsif (assunto.cd_assunto_trf ='55211') then assunto.cd_assunto_pai := '8808';
Elsif (assunto.cd_assunto_trf ='55212') then assunto.cd_assunto_pai := '8808';
Elsif (assunto.cd_assunto_trf ='55213') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55214') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55215') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55216') then assunto.cd_assunto_pai := '2567';
Elsif (assunto.cd_assunto_trf ='55217') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55218') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55219') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55220') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55225') then assunto.cd_assunto_pai := '10571';
Elsif (assunto.cd_assunto_trf ='55226') then assunto.cd_assunto_pai := '8859';
Elsif (assunto.cd_assunto_trf ='55228') then assunto.cd_assunto_pai := '10655';
Elsif (assunto.cd_assunto_trf ='55230') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55232') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55233') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55234') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55235') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55236') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55237') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55240') then assunto.cd_assunto_pai := '8919';
Elsif (assunto.cd_assunto_trf ='55241') then assunto.cd_assunto_pai := '8919';
Elsif (assunto.cd_assunto_trf ='55242') then assunto.cd_assunto_pai := '8919';
Elsif (assunto.cd_assunto_trf ='55243') then assunto.cd_assunto_pai := '8919';
Elsif (assunto.cd_assunto_trf ='55245') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55246') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55247') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55249') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55253') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55254') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55255') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55256') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55257') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55258') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55259') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55260') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55265') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55266') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55267') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55268') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55269') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55270') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55271') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55272') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55273') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55274') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55275') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55276') then assunto.cd_assunto_pai := '9163';
Elsif (assunto.cd_assunto_trf ='55277') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55279') then assunto.cd_assunto_pai := '9180';
Elsif (assunto.cd_assunto_trf ='55280') then assunto.cd_assunto_pai := '9180';
Elsif (assunto.cd_assunto_trf ='55281') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55286') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55287') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55288') then assunto.cd_assunto_pai := '9192';
Elsif (assunto.cd_assunto_trf ='55289') then assunto.cd_assunto_pai := '8888';
Elsif (assunto.cd_assunto_trf ='55290') then assunto.cd_assunto_pai := '8888';
Elsif (assunto.cd_assunto_trf ='55296') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55297') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55298') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55299') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55300') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55301') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55302') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55303') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55304') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55305') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55306') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55307') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55308') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55309') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55310') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55311') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55312') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55313') then assunto.cd_assunto_pai := '10015';
Elsif (assunto.cd_assunto_trf ='55314') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55315') then assunto.cd_assunto_pai := '2624';
Elsif (assunto.cd_assunto_trf ='55316') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55317') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55318') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55319') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55320') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55321') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55322') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55323') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55324') then assunto.cd_assunto_pai := '5278';
Elsif (assunto.cd_assunto_trf ='55325') then assunto.cd_assunto_pai := '5294';
Elsif (assunto.cd_assunto_trf ='55326') then assunto.cd_assunto_pai := '5294';
Elsif (assunto.cd_assunto_trf ='55327') then assunto.cd_assunto_pai := '5294';
Elsif (assunto.cd_assunto_trf ='55328') then assunto.cd_assunto_pai := '7646';
Elsif (assunto.cd_assunto_trf ='55329') then assunto.cd_assunto_pai := '5299';
Elsif (assunto.cd_assunto_trf ='55330') then assunto.cd_assunto_pai := '5299';
Elsif (assunto.cd_assunto_trf ='55331') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55332') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55333') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55334') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55335') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55336') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55337') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55338') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55339') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55340') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55341') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55342') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55343') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55344') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55345') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55346') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55347') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55348') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55349') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55350') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55351') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55352') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55353') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55354') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55355') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55356') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55357') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55358') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55359') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55360') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55361') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55362') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55363') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55364') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55365') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55366') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55367') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55368') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55369') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55370') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55371') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55372') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55373') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55374') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55375') then assunto.cd_assunto_pai := '2450';
Elsif (assunto.cd_assunto_trf ='55376') then assunto.cd_assunto_pai := '2426';
Elsif (assunto.cd_assunto_trf ='55377') then assunto.cd_assunto_pai := '2426';
Elsif (assunto.cd_assunto_trf ='55378') then assunto.cd_assunto_pai := '2426';
Elsif (assunto.cd_assunto_trf ='55379') then assunto.cd_assunto_pai := '10581';
Elsif (assunto.cd_assunto_trf ='55380') then assunto.cd_assunto_pai := '10581';
Elsif (assunto.cd_assunto_trf ='55381') then assunto.cd_assunto_pai := '7633';
Elsif (assunto.cd_assunto_trf ='55382') then assunto.cd_assunto_pai := '10571';
Elsif (assunto.cd_assunto_trf ='55383') then assunto.cd_assunto_pai := '10571';
Elsif (assunto.cd_assunto_trf ='55384') then assunto.cd_assunto_pai := '10571';
Elsif (assunto.cd_assunto_trf ='55385') then assunto.cd_assunto_pai := '10571';
Elsif (assunto.cd_assunto_trf ='55386') then assunto.cd_assunto_pai := '10571';
Elsif (assunto.cd_assunto_trf ='55387') then assunto.cd_assunto_pai := '10571';
Elsif (assunto.cd_assunto_trf ='55388') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55389') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55390') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55391') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55392') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55393') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55394') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55395') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55396') then assunto.cd_assunto_pai := '2594';
Elsif (assunto.cd_assunto_trf ='55397') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55398') then assunto.cd_assunto_pai := '1888';
Elsif (assunto.cd_assunto_trf ='55399') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55400') then assunto.cd_assunto_pai := '2452';
Elsif (assunto.cd_assunto_trf ='55401') then assunto.cd_assunto_pai := '2506';
Elsif (assunto.cd_assunto_trf ='55402') then assunto.cd_assunto_pai := '2506';
Elsif (assunto.cd_assunto_trf ='55403') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55404') then assunto.cd_assunto_pai := '1907';
Elsif (assunto.cd_assunto_trf ='55405') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55406') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55407') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55408') then assunto.cd_assunto_pai := '2620';
Elsif (assunto.cd_assunto_trf ='55409') then assunto.cd_assunto_pai := '2641';
Elsif (assunto.cd_assunto_trf ='55410') then assunto.cd_assunto_pai := '2641';
Elsif (assunto.cd_assunto_trf ='55411') then assunto.cd_assunto_pai := '2641';
Elsif (assunto.cd_assunto_trf ='55412') then assunto.cd_assunto_pai := '2641';
Elsif (assunto.cd_assunto_trf ='55413') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55414') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55415') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55416') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55417') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55418') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55419') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55420') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55421') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55422') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55423') then assunto.cd_assunto_pai := '1937';
Elsif (assunto.cd_assunto_trf ='55424') then assunto.cd_assunto_pai := '8805';
Elsif (assunto.cd_assunto_trf ='55425') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55426') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55427') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55428') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55429') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55430') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55431') then assunto.cd_assunto_pai := '8919';
Elsif (assunto.cd_assunto_trf ='55432') then assunto.cd_assunto_pai := '8928';
Elsif (assunto.cd_assunto_trf ='55433') then assunto.cd_assunto_pai := '8934';
Elsif (assunto.cd_assunto_trf ='55434') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55435') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55436') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55437') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55438') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55439') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55440') then assunto.cd_assunto_pai := '8941';
Elsif (assunto.cd_assunto_trf ='55441') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55442') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55443') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55444') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55445') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55446') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55447') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55448') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55449') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55450') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55451') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55452') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55453') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55454') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55455') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55456') then assunto.cd_assunto_pai := '8829';
Elsif (assunto.cd_assunto_trf ='55457') then assunto.cd_assunto_pai := '8838';
Elsif (assunto.cd_assunto_trf ='55458') then assunto.cd_assunto_pai := '8838';
Elsif (assunto.cd_assunto_trf ='55459') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55460') then assunto.cd_assunto_pai := '10880';
Elsif (assunto.cd_assunto_trf ='55461') then assunto.cd_assunto_pai := '10880';
Elsif (assunto.cd_assunto_trf ='55462') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55463') then assunto.cd_assunto_pai := '10686';
Elsif (assunto.cd_assunto_trf ='55464') then assunto.cd_assunto_pai := '10686';
Elsif (assunto.cd_assunto_trf ='55465') then assunto.cd_assunto_pai := '10672';
Elsif (assunto.cd_assunto_trf ='55466') then assunto.cd_assunto_pai := '10679';
Elsif (assunto.cd_assunto_trf ='55467') then assunto.cd_assunto_pai := '10672';
Elsif (assunto.cd_assunto_trf ='55468') then assunto.cd_assunto_pai := '10672';
Elsif (assunto.cd_assunto_trf ='55469') then assunto.cd_assunto_pai := '10678';
Elsif (assunto.cd_assunto_trf ='55470') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55471') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55472') then assunto.cd_assunto_pai := '10673';
Elsif (assunto.cd_assunto_trf ='55473') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55474') then assunto.cd_assunto_pai := '8875';
Elsif (assunto.cd_assunto_trf ='55475') then assunto.cd_assunto_pai := '8875';
Elsif (assunto.cd_assunto_trf ='55476') then assunto.cd_assunto_pai := '8875';
Elsif (assunto.cd_assunto_trf ='55477') then assunto.cd_assunto_pai := '8875';
Elsif (assunto.cd_assunto_trf ='55478') then assunto.cd_assunto_pai := '8875';
Elsif (assunto.cd_assunto_trf ='55479') then assunto.cd_assunto_pai := '8875';
Elsif (assunto.cd_assunto_trf ='55480') then assunto.cd_assunto_pai := '11786';
Elsif (assunto.cd_assunto_trf ='55481') then assunto.cd_assunto_pai := '11786';
Elsif (assunto.cd_assunto_trf ='55482') then assunto.cd_assunto_pai := '8859';
Elsif (assunto.cd_assunto_trf ='55483') then assunto.cd_assunto_pai := '8859';
Elsif (assunto.cd_assunto_trf ='55484') then assunto.cd_assunto_pai := '8859';
Elsif (assunto.cd_assunto_trf ='55485') then assunto.cd_assunto_pai := '8868';
Elsif (assunto.cd_assunto_trf ='55486') then assunto.cd_assunto_pai := '8868';
Elsif (assunto.cd_assunto_trf ='55487') then assunto.cd_assunto_pai := '8868';
Elsif (assunto.cd_assunto_trf ='55488') then assunto.cd_assunto_pai := '8868';
Elsif (assunto.cd_assunto_trf ='55489') then assunto.cd_assunto_pai := '8873';
Elsif (assunto.cd_assunto_trf ='55490') then assunto.cd_assunto_pai := '8873';
Elsif (assunto.cd_assunto_trf ='55491') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55492') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55493') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55494') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55495') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55496') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55497') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55498') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55499') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55500') then assunto.cd_assunto_pai := '8961';
Elsif (assunto.cd_assunto_trf ='55501') then assunto.cd_assunto_pai := '8961';
Elsif (assunto.cd_assunto_trf ='55502') then assunto.cd_assunto_pai := '8961';
Elsif (assunto.cd_assunto_trf ='55503') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55504') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55505') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55506') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55507') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55508') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55509') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55510') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55511') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55512') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55513') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55514') then assunto.cd_assunto_pai := '12419';
Elsif (assunto.cd_assunto_trf ='55515') then assunto.cd_assunto_pai := '9024';
Elsif (assunto.cd_assunto_trf ='55516') then assunto.cd_assunto_pai := '9024';
Elsif (assunto.cd_assunto_trf ='55517') then assunto.cd_assunto_pai := '9024';
Elsif (assunto.cd_assunto_trf ='55518') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55519') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55520') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55521') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55522') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55523') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55524') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55525') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55526') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55527') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55528') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55529') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55530') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55531') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55532') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55533') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55534') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55535') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55536') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55537') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55538') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55539') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55540') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55541') then assunto.cd_assunto_pai := '9045';
Elsif (assunto.cd_assunto_trf ='55542') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55543') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55544') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55545') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55546') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55547') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55548') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55549') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55550') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55551') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55552') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55553') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55554') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55555') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55556') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55557') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55558') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55559') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55560') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55561') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55562') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55563') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55564') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55565') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55566') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55567') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55568') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55569') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55570') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55571') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55572') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55573') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55574') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55575') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55576') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55577') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55578') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55579') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55580') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55581') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55582') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55583') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55584') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55585') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55586') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55587') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55588') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55589') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55590') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55591') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55592') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55593') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55594') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55595') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55596') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55597') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55598') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55599') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55600') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55601') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55602') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55603') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55604') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55605') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55606') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55607') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55608') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55609') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55610') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55611') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55612') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55613') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55614') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55615') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55616') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55617') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55618') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55619') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55620') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55621') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55622') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55623') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55624') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55625') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55626') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55627') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55628') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55629') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55630') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55631') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55632') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55633') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55634') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55635') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55636') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55637') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55638') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55639') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55640') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55641') then assunto.cd_assunto_pai := '10652';
Elsif (assunto.cd_assunto_trf ='55054') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55077') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55078') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55218') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55230') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55301') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55336') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55341') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55581') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55596') then assunto.cd_assunto_pai := '2546';
Elsif (assunto.cd_assunto_trf ='55619') then assunto.cd_assunto_pai := '2546';
End if;   

if (assunto.cd_assunto_trf in ('55639','55604','55549','55508','55492','55405','55349','55345','55309','55254','55218','55108','55077','8890','5223','5222','5215','5206','5200','5192','5180','5178','5171','5142','5140','5134','5126','5121','5117','5116','5107','5094','5077','5072','5071','5053','5050','5030','5017','4953','4947','4946','4919','4882','4870','4869','4849','4845','4835','4834','4792','4789','4770','4769','4767','4765','4762','4760','4756','4755','4753','4752','4751','4750','4749','4727','4715','4712','4697','4691','4690','4688','4593','4586','4585','4584','4558','4548','4539','4538','4537','3740','2431','2428','2324','2322','2314','1893','1890','1884','1881','1878','1874','1801','1800','1797','1532','1531','1528','1525','1524','1523','1522','1521','1518','1517','1516','1514','1508','1498','1491','1488','1482','1480','1479','1472','1470','1469','1468','1467','1466','1454','1451','1446','1201','1200','1197','1195','1194','1193','1191','1190','1189','1186','1182','1180','1178','1169','1164','1161','1154','1153','1150','1149','1147','1145','1142','1140','1134','1129','1128','32','1654','1140','1142','1147','1156','1161','1169','1451','1466','1468','1469','1479','1482','1491','1498','1508','1516','1518','1525','1528','1531','1532','1723','1783','1855','1888','1904','1978','1988','1998','2019','2021','2117','2210','2212','2215','2331','2435','2449','2452','2458','2466','2478','2479','2480','2506','2540','2546','2569','2594','2641','2663','2666','2697','2704','3529','3740','4537','4538','4539','4586','4691','4697','4760','4751','4753','4755','4756','4760','4792','4834','5050','5053','5077','5134','5280','5356','7631','8805','8808','8809','8813','8816','8817','8820','8821','8822','8823','9419','10570','10939','10683','1658','1663','1666','1681','1806','1816','1888','1904','1907','1920','1998','2019','2086','2140','2243','2331','2426','2506','2554','2624','2641','2697','2704','4435','5280','5294','5297','7646','8859','8875','8961','9050','9163','9180','9487','10581','10652''10655','10679','10686','10880','11786','864','1695','2581','2662','7628','7644','8826','8893','8990','10568','11781','2633')) then 
  assunto.cd_assunto_trf:='8822'; assunto.ds_assunto_trf:='Indenizacao Adicional'; assunto.cd_assunto_pai := '2546';
end if;

	raise notice '<assunto principal="%">', assunto.in_assunto_principal; 		
    If (to_number(assunto.cd_assunto_trf,'99999') > 50000) Then
	    If (to_number(assunto.cd_assunto_pai,'99999') > 50000) Then
		  assunto.cd_assunto_pai := '2546';
		End If;
        raise notice '<assuntoLocal codigoAssunto="%" codigoPaiNacional="%" descricao="%" />', assunto.cd_assunto_trf, assunto.cd_assunto_pai, assunto.ds_assunto_trf;
		cd_assunto_trf_anterior := '1';
	Else
	    raise notice '<codigoNacional>%</codigoNacional>', assunto.cd_assunto_trf;
		cd_assunto_trf_anterior := '1';
    End If;			
    raise notice '</assunto>';
    END LOOP;	
	
	if (cd_assunto_trf_anterior = '0') Then
		raise notice '<assunto principal="true">';
		raise notice '<codigoNacional>8822</codigoNacional>';
		raise notice '</assunto>';
	End if;	
	
    -- magistradoAtuante
    for magAtuante in
    (
      select distinct ul.ds_login
      from tb_processo_evento pe 
      inner join tb_processo_documento pd on 1=1
        and pd.id_processo_documento = pe.id_processo_documento
      inner join tb_proc_doc_bin_pess_assin pp on 1=1
        and pp.id_processo_documento_bin = pd.id_processo_documento_bin
      inner join tb_pessoa_magistrado pm on 1=1
        and pm.id = pp.id_pessoa
      inner join tb_usuario_login ul on 1=1
        and ul.id_usuario = pm.id
      where 1=1
        and pe.id_processo = proc.id_processo_trf
    )
    loop

    raise notice '<magistradoAtuante>%</magistradoAtuante>', magAtuante.ds_login;

    end loop;

    -- processoVinculado
    for procVinculo in
    (
      select 
        regexp_replace(pr.nr_processo, '[\.\-]', '', 'g') nr_processo, 
        mt.cd_vinculo
      from tb_proc_prevencao pp
      inner join tb_proc_prevencao_analise pa on 1=1
        and pa.id_proc_prevencao = pp.id_proc_prevencao
      inner join tb_motivo_prevencao mp on 1=1
        and mp.nr_motivo_prevencao = pa.nr_motivo_prevencao
        and mp.in_tipo_motivo = 'A'
      inner join tb_processo pr on 1=1
        and pr.id_processo = pa.id_processo_antecedente
      inner join 
      (
        select 'ADCX' cd_motivo_prevencao, 'CX' cd_vinculo union 
        select 'ADCT' cd_motivo_prevencao, 'CT' cd_vinculo union 
        select 'ADRD' cd_motivo_prevencao, 'DP' cd_vinculo union 
        select 'ADDI' cd_motivo_prevencao, 'DP' cd_vinculo 
      ) mt on 1=1
        and mt.cd_motivo_prevencao = mp.cd_motivo_prevencao
      where 1=1
        and pp.in_situacao_analisada = 'S'
        and pp.id_processo_analise = proc.id_processo_trf
    )
    loop
      
      raise notice '<processoVinculado numeroProcesso="%" vinculo="%" />'
        , procVinculo.nr_processo, procVinculo.cd_vinculo;

    end loop;
    
	--Sigla Tribunal
	raise notice '<siglaTribunal>TRT13</siglaTribunal>';
	
	--Grau
	raise notice '<grau>G2</grau>';
	
    -- prioridade
    for prioridade in 
    (
      select pr.ds_prioridade
      from tb_proc_prioridde_processo pp
      inner join tb_prioridade_processo pr on 1=1
        and pr.id_prioridade_processo = pp.id_prioridade_processo
      where 1=1
        and pp.id_processo_trf = proc.id_processo_trf
    )
    loop

      raise notice '<prioridade>%</prioridade>', prioridade.ds_prioridade;

    end loop;	

    -- outroParametro
    raise notice '<outroParametro nome="%" valor="%" />', concat('GERACAO: ',now()),proc.id_processo_trf;
	
    -- valorCausa
    raise notice '<valorCausa>%</valorCausa>', proc.valorCausa;

    /* orgaoJulgador */
    raise notice '<orgaoJulgador codigoOrgao="%" nomeOrgao="%" instancia="%" codigoMunicipioIBGE="%"/>'
      , proc.ds_sigla, proc.ds_orgao_julgador, proc.tp_instancia, proc.id_municipio_ibge_atual;

	IF proc.ds_proc_referencia is not null THEN
  	  raise notice '<outrosnumeros>%</outrosnumeros>', proc.ds_proc_referencia;
	END IF;
    
	org_ds_sigla 				:= proc.ds_sigla;
	org_ds_orgao_julgador 		:= proc.ds_orgao_julgador;
	org_tp_instancia 			:= proc.tp_instancia;
	org_id_municipio_ibge_atual := proc.id_municipio_ibge_atual;
	
    raise notice '</dadosBasicos>';

    FOR mov IN 
    (
      SELECT 
        pe.id_processo_evento, 
        to_char(pe.dt_atualizacao, 'yyyymmddhh24miss') AS dta_ocorrencia,
		pe.dt_atualizacao,
        case when pe.in_visibilidade_externa = true then 0 else 5 end AS in_visibilidade_externa,
        pe.id_processo_evento cd_identificador,
        pe.id_evento AS cd_movimento,
        evp.id_evento id_evento_superior,
        regexp_replace(ev.ds_evento, '[\r\n]', ' ') AS ds_evento,
        pe.id_processo_documento,  uso.ds_login, uso.id_usuario
      FROM tb_processo_evento pe 
	  INNER JOIN tb_usuario_login uso ON 1=1
	    AND uso.id_usuario = pe.id_usuario
      INNER JOIN tb_evento ev ON 1=1 AND ev.id_evento = pe.id_evento AND ev.in_ativo  = 'S' and pe.id_evento not in ('48','193','230','236','237','238','239','240','242','246','265','373','378','429','431','432','1013','1059','2019','2029','2086','2704','11010')
      LEFT JOIN tb_evento evp ON 1=1
        and ev.id_evento >= 50000
		and ev.id_evento not in (50052, 50005)
        and evp.id_evento in (1, 977, 979, 981, 132, 115)
        and evp.ds_evento ~ '(Magistrado)|(Recebimento.*)'
        and regexp_replace(evp.ds_caminho_completo, '^(Serventuario\|)?([^\|]+).*$', '\1\2') = regexp_replace(ev.ds_caminho_completo, '^(Serventuario\|)?([^\|]+).*$', '\1\2')
      WHERE 1=1
        AND pe.id_processo_evento_excludente IS NULL
        AND pe.id_processo = proc.id_processo_trf
      ORDER BY pe.dt_atualizacao ASC
    )
    LOOP
	
	IF mov.cd_movimento in ('11010','48','193','378','1013','2086','2029','2704','2019','50073','50088') THEN
	  continue;
	END IF;
	
	IF mov.cd_movimento = '581' THEN
	  mov.cd_movimento := '60';
	ELSIF mov.cd_movimento = '900' THEN
	  mov.cd_movimento := '11796';
	ELSIF mov.cd_movimento = '50003' THEN
	  mov.cd_movimento := '1013';
	ELSIF mov.cd_movimento = '50006' THEN
	  mov.cd_movimento := '12164';
	ELSIF mov.cd_movimento = '50007' THEN
	  mov.cd_movimento := '12164';
	ELSIF mov.cd_movimento = '50020' THEN
	  mov.cd_movimento := '12293';
	ELSIF mov.cd_movimento = '50023' THEN
	  mov.cd_movimento := '11983';
	ELSIF mov.cd_movimento = '50024' THEN
	  mov.cd_movimento := '12387';
	ELSIF mov.cd_movimento = '50025' THEN
	  mov.cd_movimento := '12270';
	ELSIF mov.cd_movimento = '50029' THEN
	  mov.cd_movimento := '378';
	ELSIF mov.cd_movimento = '50033' THEN
	  mov.cd_movimento := '12291';
	ELSIF mov.cd_movimento = '50038' THEN
	  mov.cd_movimento := '12295';
	ELSIF mov.cd_movimento = '50044' THEN
	  mov.cd_movimento := '12168';
	ELSIF mov.cd_movimento = '50045' THEN
	  mov.cd_movimento := '12168';
	ELSIF mov.cd_movimento = '50047' THEN
	  mov.cd_movimento := '378';
	ELSIF mov.cd_movimento = '50048' THEN
	  mov.cd_movimento := '12185';
	ELSIF mov.cd_movimento = '50054' THEN
	  mov.cd_movimento := '12068';
	ELSIF mov.cd_movimento = '50060' THEN
	  mov.cd_movimento := '123';
	ELSIF mov.cd_movimento = '50068' THEN
	  mov.cd_movimento := '1013';
	ELSIF mov.cd_movimento = '50070' THEN
	  mov.cd_movimento := '377';
	ELSIF mov.cd_movimento = '50071' THEN
	  mov.cd_movimento := '12164';
	ELSIF mov.cd_movimento = '50072' THEN
	  mov.cd_movimento := '11385';
	ELSIF mov.cd_movimento = '50077' THEN
	  mov.cd_movimento := '12189';
	ELSIF mov.cd_movimento = '50079' THEN
	  mov.cd_movimento := '123';
	ELSIF mov.cd_movimento = '50084' THEN
	  mov.cd_movimento := '11382';
	ELSIF mov.cd_movimento = '50080' THEN
	  mov.cd_movimento := '12387';
	ELSIF mov.cd_movimento = '50084' THEN
	  mov.cd_movimento := '1013';
	ELSIF mov.cd_movimento = '50085' THEN
	  mov.cd_movimento := '11382';
	ELSIF mov.cd_movimento = '50086' THEN
	  mov.cd_movimento := '51';
	ELSIF mov.cd_movimento = '50088' THEN
	  mov.cd_movimento := '11983';
	ELSIF mov.cd_movimento = '50091' THEN
	  mov.cd_movimento := '12067';
	ELSIF mov.cd_movimento = '50093' THEN
	  mov.cd_movimento := '434';
	ELSIF mov.cd_movimento = '50095' THEN
	  mov.cd_movimento := '123';
	ELSIF mov.cd_movimento = '50096' THEN
	  mov.cd_movimento := '123';
	ELSIF mov.cd_movimento = '50097' THEN
	  mov.cd_movimento := '12387';
	ELSIF mov.cd_movimento = '50098' THEN
	  mov.cd_movimento := '889';
	ELSIF mov.cd_movimento = '50099' THEN
	  mov.cd_movimento := '785';
	ELSIF mov.cd_movimento = '50101' THEN
	  mov.cd_movimento := '12164';
	ELSIF mov.cd_movimento = '50102' THEN
	  mov.cd_movimento := '12164';
	ELSIF mov.cd_movimento = '50103' THEN
	  mov.cd_movimento := '220';
	ELSIF mov.cd_movimento = '50105' THEN
	  mov.cd_movimento := '123';
	ELSIF mov.cd_movimento = '50107' THEN
	  mov.cd_movimento := '12387';
	ELSIF mov.cd_movimento = '50108' THEN
	  mov.cd_movimento := '12097';
	ELSIF mov.cd_movimento = '50110' THEN
	  mov.cd_movimento := '12164';
	ELSIF mov.cd_movimento = '50111' THEN
	  mov.cd_movimento := '434';
	ELSIF mov.cd_movimento = '50112' THEN
	  mov.cd_movimento := '12092';
	ELSIF mov.cd_movimento = '50113' THEN
	  mov.cd_movimento := '12093';
	ELSIF mov.cd_movimento = '50115' THEN
	  mov.cd_movimento := '207';
	ELSIF mov.cd_movimento = '50118' THEN
	  mov.cd_movimento := '12097';
	ELSIF mov.cd_movimento = '50119' THEN
	  mov.cd_movimento := '12387';
	ELSIF mov.cd_movimento = '50111' THEN
	  mov.cd_movimento := '12257';
	ELSIF mov.cd_movimento = '50115' THEN
	  mov.cd_movimento := '889';
	ELSIF mov.cd_movimento = '50116' THEN
	  mov.cd_movimento := '332';
	ELSIF mov.cd_movimento = '50118' THEN
	  mov.cd_movimento := '792';
	ELSIF mov.cd_movimento = '50121' THEN
	  mov.cd_movimento := '12164';
	ELSIF mov.cd_movimento = '50122' THEN
	  mov.cd_movimento := '196';
	ELSIF mov.cd_movimento = '50124' THEN
	  mov.cd_movimento := '12255';
	ELSIF mov.cd_movimento = '50126' THEN
	  mov.cd_movimento := '10953';
	ELSIF mov.cd_movimento = '50127' THEN
	  mov.cd_movimento := '332';
	ELSIF mov.cd_movimento = '50128' THEN
	  mov.cd_movimento := '12387';
	END IF;  

	IF  mov.cd_movimento ='218'	THEN
		mov.id_evento_superior := '785';
	ELSIF  mov.cd_movimento ='219'	THEN
		mov.id_evento_superior := '332';
	ELSIF  mov.cd_movimento ='220'	THEN
		mov.id_evento_superior := '785';
	ELSIF  mov.cd_movimento ='221'	THEN
		mov.id_evento_superior := '889';
	ELSIF mov.cd_movimento = '50001' THEN
		mov.id_evento_superior := '335';
	ELSIF mov.cd_movimento = '50006' THEN
		mov.id_evento_superior := '12444';
	ELSIF mov.cd_movimento ='50007'	THEN	
		mov.id_evento_superior := '12455';
	ELSIF mov.cd_movimento ='50042'	THEN	
		mov.id_evento_superior := '12164';
	ELSIF mov.cd_movimento ='50044'	THEN	
		mov.id_evento_superior := '12457';
	ELSIF mov.cd_movimento ='50047'	THEN	
		mov.id_evento_superior := '11384';
	ELSIF mov.cd_movimento ='50048'	THEN	
		mov.id_evento_superior := '11373';
	ELSIF mov.cd_movimento ='50050'	THEN	
		mov.id_evento_superior := '385';
	ELSIF mov.cd_movimento ='50054'	THEN	
		mov.id_evento_superior := '12065';
	ELSIF mov.cd_movimento ='50060'	THEN	
		mov.id_evento_superior := '132';
	ELSIF mov.cd_movimento ='50071'	THEN	
		mov.id_evento_superior := '12164';
	ELSIF mov.cd_movimento ='50073'	THEN	
		mov.id_evento_superior := '479';
	ELSIF mov.cd_movimento ='50085'	THEN	
		mov.id_evento_superior := '11020';
	ELSIF mov.cd_movimento ='50086'	THEN	
		mov.id_evento_superior := '51';
	ELSIF mov.cd_movimento ='50087'	THEN	
		mov.id_evento_superior := '22';
	ELSIF mov.cd_movimento ='50091'	THEN	
		mov.id_evento_superior := '12065';
	ELSIF mov.cd_movimento ='50092'	THEN	
		mov.id_evento_superior := '272';
	ELSIF mov.cd_movimento ='50094'	THEN	
		mov.id_evento_superior := '12185';
	ELSIF mov.cd_movimento ='50096'	THEN	
		mov.id_evento_superior := '431';
	ELSIF mov.cd_movimento ='50097'	THEN	
		mov.id_evento_superior := '332';
	ELSIF mov.cd_movimento ='50101'	THEN	
		mov.id_evento_superior := '12185';
	ELSIF mov.cd_movimento ='50102'	THEN	
		mov.id_evento_superior := '332';
	ELSIF mov.cd_movimento ='50105'	THEN	
		mov.id_evento_superior := '12164';
	ELSIF mov.cd_movimento ='50107'	THEN	
		mov.id_evento_superior := '12387';
	ELSIF mov.cd_movimento ='50116'	THEN	
		mov.id_evento_superior := '12096';
	ELSIF mov.cd_movimento ='50118'	THEN	
		mov.id_evento_superior := '348';
	ELSIF mov.cd_movimento ='50120'	THEN	
		mov.id_evento_superior := '12258';
	ELSIF mov.cd_movimento ='50124'	THEN	
		mov.id_evento_superior := '236';
	ELSIF mov.cd_movimento ='50127'	THEN	
		mov.id_evento_superior := '272';
	ELSIF mov.cd_movimento ='50128'	THEN	
		mov.id_evento_superior := '135';
	ELSIF mov.cd_movimento ='50135'	THEN	
		mov.id_evento_superior := '898';
	ELSIF mov.cd_movimento ='50136'	THEN	
		mov.id_evento_superior := '898';
	ELSE
		mov.id_evento_superior := '12291';
	END IF;	
	
	  select '1'
	  into tipoResponsavelMovimento
	  from tb_pessoa_magistrado m
	  where m.id = mov.id_usuario
	  limit 1;
	  IF NOT FOUND THEN
		tipoResponsavelMovimento := '0';
	  END IF;
	  
      IF ((mov.ds_login ~ '^[0-9]{11}') and tipoResponsavelMovimento = '1') THEN --VERIFICA SE O DS_LOGIN TEM 11 NÚMEROS
        raise notice '<movimento dataHora="%" nivelSigilo="%" responsavelMovimento="%" tipoResponsavelMovimento="%" identificadorMovimento="%" tipoDecisao="1">'
          , mov.dta_ocorrencia, mov.in_visibilidade_externa, coalesce(mov.ds_login,''), tipoResponsavelMovimento, mov.cd_identificador;
	  ELSIF ((mov.ds_login ~ '^[0-9]{11}') and tipoResponsavelMovimento = '0') THEN --VERIFICA SE O DS_LOGIN TEM 11 NÚMEROS
        raise notice '<movimento dataHora="%" nivelSigilo="%" responsavelMovimento="%" tipoResponsavelMovimento="%" identificadorMovimento="%">'
          , mov.dta_ocorrencia, mov.in_visibilidade_externa, coalesce(mov.ds_login,''), tipoResponsavelMovimento, mov.cd_identificador;
	  ELSE	  
        raise notice '<movimento dataHora="%" nivelSigilo="%" identificadorMovimento="%" >'
          , mov.dta_ocorrencia, mov.in_visibilidade_externa, mov.cd_identificador;
	  END IF;	

      IF mov.cd_movimento < 50000 THEN
        raise notice '<movimentoNacional codigoNacional="%">', mov.cd_movimento;
      END IF;
	  
	  conta_classe_alterada := 0;
  	  complemento_concatenado = '';
      
      for compl in 
      (
        select 
          tc.cd_tipo_complemento, 
          tc.ds_nome,
          nullif(trim(cs.ds_texto), '') AS cd_complemento,
          regexp_replace(cs.ds_valor_complemento, '[\r\n]', ' ') AS nm_complemento
        from tb_complemento_segmentado cs
        inner join tb_tipo_complemento tc ON 1=1
          AND tc.id_tipo_complemento = cs.id_tipo_complemento
        where 1=1
          and cs.id_movimento_processo = mov.id_processo_evento
          and tc.cd_tipo_complemento is not null
          and tc.ds_nome is not null
          and (0=1 or '' <> trim(cs.ds_texto) or cs.ds_valor_complemento is not null)
		  order by cs.id_complemento_segmentado asc
      )
      loop
		complemento_corrigido := replace(replace(replace(compl.nm_complemento,'"',''), '&', 'e'),'<','');
        IF complemento_corrigido is null THEN
		  complemento_corrigido := colaesce(mov.ds_evento,'NA');
        END IF;
		
        --CORREÇÃO DO COMPLEMENTO
		codComplemento 			:= trim(compl.cd_tipo_complemento);
		descricaoComplemento 	:= trim(compl.ds_nome);
		codComplementoTabelado 	:= trim(compl.cd_complemento);
		complemento_corrigido   := initcap(trim(complemento_corrigido));
		
		IF mov.cd_movimento = '92' THEN
		  IF codComplemento = '5041' THEN
		     codComplemento := '14';
		  END IF;
		  IF codComplemento not in ('5','14') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '5';
		  END IF;
		ELSIF mov.cd_movimento = '928' THEN
		  IF codComplemento not in ('5','14') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '5';
		  END IF;
		ELSIF mov.cd_movimento = '10966' THEN
	      IF codComplemento not in ('26','27') or coalesce(codComplemento,'') = '' THEN		
			  IF conta_classe_alterada = 0 THEN
				codComplemento := '26';
				codComplemento10966 := concat('Classe Processual alterada de 26:classe_anterior:',NULLIF(regexp_replace(complemento_corrigido, '\D','','g'), '')::numeric);
			  ELSE
				codComplemento := '27';
				codComplemento10966 := concat(codComplemento10966,' para 27:classe_nova:',NULLIF(regexp_replace(complemento_corrigido, '\D','','g'), '')::numeric);
			  END IF;
		      conta_classe_alterada := 1;	
		  END IF;	  
		ELSIF mov.cd_movimento in ('12260','1061','1062','848') THEN
			codComplemento := '14';
		ELSIF mov.cd_movimento = '1051' THEN
		  IF codComplemento = '5045' THEN
		     codComplemento := '14';
		  END IF;
		  IF codComplemento not in ('1','14') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '1';
		  END IF;
		ELSIF mov.cd_movimento = '190' THEN
		  IF codComplemento not in ('10','14') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '10';
		  END IF;
		ELSIF mov.cd_movimento = '945' THEN
		  IF codComplemento not in ('10','14') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '10';
		  END IF;
		ELSIF mov.cd_movimento = '970' THEN
		  IF codComplemento = '5005' THEN
		     codComplemento = '12';
		  END IF;
		  IF codComplemento not in ('12','15','16','21','36') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '16';
		  END IF;
		ELSIF mov.cd_movimento = '417' THEN
		  IF codComplemento not in ('12','21') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '12';
		  END IF;
		ELSIF mov.cd_movimento in ('311','313') THEN
		  IF codComplemento not in ('12','15','21') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '12';
		  END IF;
		ELSIF mov.cd_movimento in ('493','12214') THEN
		     codComplemento := '13';
		ELSIF mov.cd_movimento in ('11424','11423','12476','11425','11426') THEN
		  IF codComplemento not in ('31','32') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '31';
		  END IF;		
		ELSIF mov.cd_movimento in ('978','12622') THEN
		     codComplemento := '7';		  
		ELSIF mov.cd_movimento = '982' THEN
		  IF codComplemento not in ('7','18') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '18';
		  END IF;
		ELSIF mov.cd_movimento = '123' THEN
		  IF codComplemento not in ('7','18') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '18';
		  END IF;
		ELSIF mov.cd_movimento = '980' THEN
		     codComplemento := '7';
		ELSIF mov.cd_movimento = '12296' THEN
		     codComplemento := '34';
		ELSIF mov.cd_movimento = '36' THEN
		  IF codComplemento not in ('2','17') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '17';
		  END IF;
		ELSIF mov.cd_movimento = '11983' THEN
		     codComplemento := '25';
		ELSIF mov.cd_movimento = '12257' THEN
		     codComplemento := '33';
		ELSIF mov.cd_movimento in ('11796','12421') THEN
		     codComplemento := '20';
		ELSIF mov.cd_movimento in ('135','137') THEN
		  IF codComplemento not in ('8','9') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '8';
		  END IF;
		ELSIF mov.cd_movimento = '861' THEN
		  codComplemento := '9';
		ELSIF mov.cd_movimento = '265' THEN
		  IF codComplemento not in ('28','29') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '28';
		  END IF;
		ELSIF mov.cd_movimento = '11975' THEN
		  IF codComplemento not in ('22','28','30') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '22';
		  END IF;
		ELSIF mov.cd_movimento in ('106','112') THEN
		  codComplemento := '6';
		ELSIF mov.cd_movimento  = '12658' THEN
		  codComplemento := '38';
		ELSIF mov.cd_movimento = '51' THEN
		  codComplemento := '3';
		ELSIF mov.cd_movimento = '873' THEN
		  codComplemento := '23';
		ELSIF mov.cd_movimento = '26' THEN
		  codComplemento := '2';
		ELSIF mov.cd_movimento in ('60','581') THEN
		  IF codComplemento not in ('183','74','170','75','76','77','107','181','175','173','174','172','171','116','78','79','163','80','81','118','178','82','177') or coalesce(codComplemento,'') = '' THEN
		     codComplemento := '116';
		  END IF;
		ELSIF mov.cd_movimento = '12479' THEN
		  codComplemento := '32';
		ELSIF mov.cd_movimento = '85' THEN
		  codComplemento := '19';
		ELSIF mov.cd_movimento = '12657' THEN
		  codComplemento := '37';
		ELSIF mov.cd_movimento in ('12616','12446','334','787','818','442','11415','450','451','452','453','443','444','11554','445','242','240','241','239','237','238','12441','12442','12436','12440','12438','12434','12437','12436','12435','12443','12473','1051','824','823','355','354','352','905','12444','446','447','448','449','12449','869','12028','12467','12453','12452','12451','12456','12427','12458','12475','235','804','391','393','12035','388','389','11792') THEN
		     codComplemento := '1';
		END IF;	

		Select *
		into descricaoComplemento
		from verificaDescricaoComplemento_G1G2(codComplementoTabelado, descricaoComplemento);
		
		Select *
		into codComplementoTabelado
		from verificaComplementoTabelado_G1G2(codComplementoTabelado);
		
		IF codComplemento ='31' and (codComplementoTabelado not in ('126','124','125') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '126'; -- A criança ou adolescente
		ELSIF codComplemento ='36' and (codComplementoTabelado not in ('188','185','186','187') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '185'; -- JUIZ(A)
		ELSIF codComplemento ='34' and (codComplementoTabelado not in ('166','167','168','169') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '169'; -- RETIFICADA A AUTUAÇÃO
		ELSIF codComplemento ='17' THEN 
		  IF codComplementoTabelado in ('7072','7068','7069','7070','7071','7624','7625') THEN
		    codComplementoTabelado := '34';
		  ELSIF codComplementoTabelado in ('7076','7075') THEN
		    codComplementoTabelado := '31';
		  ELSIF codComplementoTabelado in ('7508') THEN
		    codComplementoTabelado := '84';
		  ELSIF codComplementoTabelado in ('7074') THEN
		    codComplementoTabelado := '30';
		  END IF;
		  IF (codComplementoTabelado not in ('84','35','28','29','89','30','83','87','88','86','34','31') or codComplementoTabelado is null) THEN
		    codComplementoTabelado := '83'; -- INCOMPETÊNCIA
		  END IF;
		ELSIF codComplemento ='18' and (codComplementoTabelado not in ('108','110','37','38','190','109','40','39','194') or codComplementoTabelado is null) THEN
		    codComplementoTabelado := '40'; -- OUTROS MOTIVOS
		ELSIF codComplemento ='6' AND (codComplementoTabelado not in ('7','8') or codComplementoTabelado is null) THEN
		    codComplementoTabelado := '7'; -- ENTREGUE AO DESTINATARIO
		ELSIF codComplemento ='15' and (codComplementoTabelado not in ('12','11','15','9','14','13','10') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '9'; -- DESIGNADA
		ELSIF codComplemento ='16' THEN
		  IF codComplementoTabelado = '1' THEN
		    codComplementoTabelado := '17';
		  ELSIF codComplementoTabelado = '11' THEN
		    codComplementoTabelado := '22';
		  ELSIF codComplementoTabelado = '15' THEN
		    codComplementoTabelado := '21';
		  ELSIF codComplementoTabelado = '2' THEN
		    codComplementoTabelado := '20';
		  ELSIF codComplementoTabelado = '3' THEN
		    codComplementoTabelado := '21';
		  ELSIF codComplementoTabelado = '4' THEN
		    codComplementoTabelado := '24';
		  ELSIF codComplementoTabelado = '5' THEN
		    codComplementoTabelado := '21';	
		  ELSIF codComplementoTabelado = '6' THEN
		    codComplementoTabelado := '22';
		  ELSIF codComplementoTabelado = '7' THEN
		    codComplementoTabelado := '19';
		  ELSIF codComplementoTabelado = '7195' THEN
		    codComplementoTabelado := '21';
		  ELSIF codComplementoTabelado = '7450' THEN
		    codComplementoTabelado := '21';
		  ELSIF codComplementoTabelado = '7522' THEN
		    codComplementoTabelado := '22';
		  ELSIF codComplementoTabelado = '7523' THEN
		    codComplementoTabelado := '18';
		  ELSIF codComplementoTabelado = '7578' THEN
		    codComplementoTabelado := '22';
		  ELSIF codComplementoTabelado = '7579' THEN
		    codComplementoTabelado := '21';
		  ELSIF codComplementoTabelado = '8' THEN
		    codComplementoTabelado := '22';
		  ELSIF codComplementoTabelado = '9' THEN
		    codComplementoTabelado := '22';
		  END IF;	
			
		  IF (codComplementoTabelado not in ('16','17','184','18','19','91','20','21','22','23','24','92','25') or codComplementoTabelado is null) THEN
		    codComplementoTabelado := '21'; -- INICIAL
		  END IF;	
		ELSIF codComplemento ='3' THEN
		  IF regexp_replace(compl.nm_complemento, '[\r\n]', '') = 'decisão' THEN
		    codComplementoTabelado := '6';
		  ELSIF regexp_replace(compl.nm_complemento, '[\r\n]', '') = 'julgamento' THEN
		    codComplementoTabelado := '36';
		  END IF;
		  IF codComplementoTabelado in ('7292','7622','7257','7293') THEN
		    codComplementoTabelado := '189';
		  ELSIF codComplementoTabelado in ('7020','7021','7024','7009','7011','7014','7015','7017','7289','7446','7485','7623','7487','7489','7486','7286','7492','7493','7651','7288','7495','7019','7018') THEN
		    codComplementoTabelado := '189';
		  END IF;
		  IF (codComplementoTabelado not in ('189','6','5','36') or codComplementoTabelado is null) THEN
		    codComplementoTabelado := '6'; -- PARA DECISÃO
		  END IF; 
		ELSIF codComplemento ='23' and (codComplementoTabelado not in ('97','98','103','99','102','104','100','101') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '98'; -- CONVERTIDO EM DILIGENCIA
		ELSIF codComplemento ='2' THEN
		  IF codComplementoTabelado = '7207' THEN
		    codComplementoTabelado := '4';
		  ELSIF codComplementoTabelado = '7208' THEN
		    codComplementoTabelado := '3';
		  ELSIF codComplementoTabelado = '7206' THEN
		    codComplementoTabelado := '1';
		  ELSIF codComplementoTabelado = '7209' THEN
		    codComplementoTabelado := '2';
		  ELSIF codComplementoTabelado = '7210' THEN
		    codComplementoTabelado := '85';
		  ELSIF codComplementoTabelado = '7211' THEN
		    codComplementoTabelado := '4';			
		  ELSIF codComplementoTabelado = '7629' THEN
		    codComplementoTabelado := '4';
		  END IF;	
		  IF (codComplementoTabelado not in ('1','4','3','2','85') or codComplementoTabelado is null) THEN
		    codComplementoTabelado := '2'; -- SORTEIO
		  END IF;	
		ELSIF codComplemento ='4' THEN
		  IF codComplementoTabelado in ( '50068','7215','7216' ) THEN
			codComplementoTabelado := '170';
		  ELSIF codComplementoTabelado in ( '7317','7318','7319' ) THEN
			codComplementoTabelado := '76';
		  ELSIF codComplementoTabelado = '7000' THEN
			codComplementoTabelado := '117';
		  ELSIF codComplementoTabelado in ( '7372','7535','7536','7373','7374','7375','7376','7222','7539','7541','7380','7537' ) THEN
			codComplementoTabelado := '78';
		  ELSIF codComplementoTabelado in ( '7224','7225' ) THEN
			codComplementoTabelado := '79';
		  ELSIF codComplementoTabelado = '7001' THEN
			codComplementoTabelado := '181';
		  ELSIF codComplementoTabelado in ( '7217','7218' ) THEN
			codComplementoTabelado := '107';
		  END IF;
		  IF (codComplementoTabelado not in ('117','176','76','182','183','74','170','75','76','77','107','181','175','173','174','172','171','116','78','79','163','80','81','118','178','82','177') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '80'; -- OUTROS DOCUMENTOS
		  END IF;
		ELSIF codComplemento ='32' and (codComplementoTabelado not in ('146','147','160','128','136','137','139','138','149','148','135','161','158'',159','145','144','151','150','140','134','129','132','130','131','157','143','152','153','154','155','156','141','142','133','127') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '160'; -- ACOLHIMENTO INSTITUCIONAL
		ELSIF codComplemento ='19' THEN
		  IF codComplementoTabelado = '7436' THEN
		    codComplementoTabelado := '54';
		  ELSIF codComplementoTabelado = '7559' THEN
		    codComplementoTabelado := '112';
		  ELSIF codComplementoTabelado = '7143' THEN
		    codComplementoTabelado := '180';
		  ELSIF codComplementoTabelado = '7151' THEN
		    codComplementoTabelado := '164';
		  ELSIF codComplementoTabelado = '7420' THEN
		    codComplementoTabelado := '55';
		  ELSIF codComplementoTabelado in ('7419','7426') THEN
		    codComplementoTabelado := '112';
		  ELSIF codComplementoTabelado = '7423' THEN
		    codComplementoTabelado := '111';
		  ELSIF codComplementoTabelado = '7427' THEN
		    codComplementoTabelado := '113';
		  ELSIF codComplementoTabelado = '7432' THEN
		    codComplementoTabelado := '45';
		  ELSIF codComplementoTabelado = '7429' THEN
		    codComplementoTabelado := '46';
		  ELSIF codComplementoTabelado = '7143' THEN
		    codComplementoTabelado := '180';
		  ELSIF codComplementoTabelado = '7157' THEN
		    codComplementoTabelado := '50';
		  ELSIF codComplementoTabelado = '7439' THEN
		    codComplementoTabelado := '115';
		  END IF;
		  IF (codComplementoTabelado not in ('41','165','164','42','43','44','45','46','47','48','180','49','114','50','51','52','53','54','115','55','56','121','122','123','120','119','179','57','58','112','113','59','60','61','62','63','64','65','66','67','68','69','111','70','71','72') or codComplementoTabelado is null) THEN
		    codComplementoTabelado := '57'; -- PETIÇÃO OUTRAS
		  END IF;	
		ELSIF codComplemento ='28' and (codComplementoTabelado not in ('105','106') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '105'; --CONTROVERSIA
		ELSIF codComplemento ='22' and (codComplementoTabelado not in ('94','95','93') or codComplementoTabelado is null) THEN
		  codComplementoTabelado := '93'; -- TST
		ELSIF codComplemento in ('5','26','27','14','12','13','7','21','25','1','33','20','9','8','29','35','30','11','38','10','37') THEN
		  codComplementoTabelado := ''; -- DEVE SER NULO
		END IF;
		
		IF coalesce(codComplementoTabelado,'') = '' THEN
		  --raise notice '<complemento>%:%:%</complemento>'  , codComplemento, descricaoComplemento, complemento_corrigido;
		  IF complemento_concatenado = '' THEN
		     complemento_concatenado := concat(codComplemento,':', descricaoComplemento,':', complemento_corrigido);
		  ELSE
		     complemento_concatenado := concat(complemento_concatenado,':',codComplemento,':', descricaoComplemento,':', complemento_corrigido);
		  END IF;
		ELSE
		  --raise notice '<complemento>%:%:%:%</complemento>' , codComplemento, descricaoComplemento, codComplementoTabelado, complemento_corrigido;
		  IF complemento_concatenado = '' THEN
		     complemento_concatenado := concat(codComplemento,':', descricaoComplemento,':', codComplementoTabelado,':', complemento_corrigido);
		  ELSE
		     complemento_concatenado := concat(complemento_concatenado,':',codComplemento,':', descricaoComplemento,':', codComplementoTabelado,':', complemento_corrigido);
		  END IF;		  
		END IF;			
		IF mov.cd_movimento < 50000 THEN
		  ARRAYcodComplemento 			:= array_append(ARRAYcodComplemento,cast(codComplemento as text));
		  ARRAYdescricaoComplemento 	:= array_append(ARRAYdescricaoComplemento,cast(descricaoComplemento as text));
		  ARRAYcodComplementoTabelado 	:= array_append(ARRAYcodComplementoTabelado,cast(codComplementoTabelado as text));
		END IF;
      end loop;
	  
	  complemento_concatenado := replace(complemento_concatenado,'::','');
	  IF mov.cd_movimento = '10966' THEN
	    complemento_concatenado := replace(complemento_concatenado,': para',' para');
	  END IF;	
	  txtComplemento := '';	
      IF mov.cd_movimento < 50000 THEN
	    IF codComplemento10966 <> '' THEN
		  raise notice '<complemento>%</complemento>', codComplemento10966;
		ELSE  
			IF  array_length(ARRAYcodComplemento,1) is null THEN
			  Select *
			  into txtComplemento
			  From verifica_texto_movimento_G1G2(mov.cd_movimento);
			  IF txtComplemento <> '' THEN
			    --raise notice '<complemento>%</complemento>', txtComplemento;
				raise notice '%', txtComplemento;
			  ELSE
			    raise notice '<complemento>%</complemento>', complemento_corrigido;
			  END IF;
			ELSE
			  raise notice '<complemento>%</complemento>', complemento_concatenado;
			END IF;
		END IF;
		
		complemento_concatenado := '';
        raise notice '</movimentoNacional>';
		IF  array_length(ARRAYcodComplemento,1) is not null THEN
			FOR C1 IN 1..array_upper(ARRAYcodComplemento, 1)
			LOOP
			IF coalesce(ARRAYcodComplementoTabelado[C1],'') <> '' THEN
				 raise notice '<complementoNacional codComplemento="%" descricaoComplemento="%" codComplementoTabelado="%" />'
					, ARRAYcodComplemento[C1], ARRAYdescricaoComplemento[C1], ARRAYcodComplementoTabelado[C1];		
			ELSE
				 raise notice '<complementoNacional codComplemento="%" descricaoComplemento="%"/>'
					, ARRAYcodComplemento[C1], ARRAYdescricaoComplemento[C1];		
			END IF;  
			END LOOP;
		ELSE
			  Select *
			  into txtComplemento
			  From verifica_texto_movimento_nacional_G1G2(mov.cd_movimento);
			  IF txtComplemento <> '' THEN
				raise notice '%', txtComplemento;	
			  END IF;
		END IF;
		
      ELSE 

        raise notice '<movimentoLocal codigoMovimento="%" codigoPaiNacional="%" descricao="%" />'
          , mov.cd_movimento, mov.id_evento_superior, mov.ds_evento;
		  
		Select *
		into movimentoLocalTabelado
		from verifica_pai_nacional(mov.id_evento_superior);
		
		IF movimentoLocalTabelado <> '' THEN
		  raise notice '%',movimentoLocalTabelado;
		END IF;
		
      END IF; 
	  
     IF mov.cd_movimento in (26,36,123,51,377,50027,50124,50103,50054,466,50106,190) THEN
		localizacaoProcesso := 'GAB';
	 ELSIF mov.cd_movimento in (417,132,873,897,898,198,871,461,459,11012,465,241,893,60,220,50118,457,221,471,972,92,472,961) THEN
		localizacaoProcesso := 'TURMA';
	 ELSIF mov.cd_movimento in (431,434,50091) THEN
		localizacaoProcesso := 'VICEPRESIDENCIA';	
	 ELSIF mov.cd_movimento in (50095,11015) THEN
		localizacaoProcesso := 'PRESIDENCIA';		
	 END IF;	  
	  
	 magProlator := '';
	 IF localizacaoProcesso = 'GAB' THEN		
		IF proc.ds_sigla = 70700 THEN
			magProlator := '03403143465'; -- 'Gabinete do Desembargador Thiago de Oliveira Andrade'
		ELSIF proc.ds_sigla = 70705 THEN
			magProlator := '82224170459'; -- 'Gabinete do Desembargador Leonardo José Videres Trajano'
		ELSIF proc.ds_sigla = 70701 THEN
			magProlator := '30935199420'; -- 'Gabinete do Desembargador Paulo Maia Filho'
		ELSIF proc.ds_sigla = 71253 THEN
			magProlator := '06985459404'; -- 'Gabinete da Desembargadora Ana Maria Ferreira Madruga'
		ELSIF proc.ds_sigla = 70698 THEN
			magProlator := '04851757468'; -- 'Gabinete do Desembargador Carlos Coelho de Miranda Freire'
		ELSIF proc.ds_sigla = 70703 THEN
			magProlator := '08030995415'; -- 'Gabinete do Desembargador Eduardo Sérgio de Almeida'
		ELSIF proc.ds_sigla = 70699 THEN
			magProlator := '04888235449'; -- 'Gabinete do Desembargador Edvaldo de Andrade'
		ELSIF proc.ds_sigla = 70697 THEN
			magProlator := '06746365468'; -- 'Gabinete do Desembargador Francisco de Assis Carvalho e Silva'
		ELSIF proc.ds_sigla = 70702 THEN
			magProlator := '32233841468'; -- 'Gabinete do Desembargador Ubiratan Moreira Delgado'
		ELSIF proc.ds_sigla = 77697 THEN
			magProlator := '56950705468'; -- 'Gabinete da Presidência'
		ELSIF proc.ds_sigla = 77698 THEN
			magProlator := '82224170459'; -- 'Gabinete da Vice-Presidência'
		ELSIF proc.ds_sigla = 70704 THEN
			magProlator := '56950705468'; -- 'Gabinete do Desembargador Wolney de Macedo Cordeiro'
		END IF;	  
	  END IF;	

	  IF magProlator <> '' THEN
        raise notice '<magistradoProlator>%</magistradoProlator>',magProlator;
	  END IF;	

      IF mov.id_processo_documento IS NOT NULL THEN
        raise notice '<idDocumentoVinculado>%</idDocumentoVinculado>', mov.id_processo_documento;
      END IF;
  
	 IF localizacaoProcesso = 'GAB' THEN
--		  raise notice '<orgaoJulgador codigoOrgao="%" nomeOrgao="%" instancia="%" codigoMunicipioIBGE="%"/>' 
--		  , org_ds_sigla, org_ds_orgao_julgador, org_tp_instancia, org_id_municipio_ibge_atual;
		  
		tag_orgao_julgador := '';  
		Select *
		into tag_orgao_julgador
		from verifica_orgao_julgador_redistribuicao_G2(proc.id_processo_trf, mov.dt_atualizacao, org_tp_instancia);

		IF tag_orgao_julgador = '' THEN
		  -- orgaoJulgador
		  raise notice '<orgaoJulgador codigoOrgao="%" nomeOrgao="%" instancia="%" codigoMunicipioIBGE="%"/>' 
		  , org_ds_sigla, org_ds_orgao_julgador, org_tp_instancia, org_id_municipio_ibge_atual;
		ELSE
		  raise notice '%',tag_orgao_julgador;
		END IF; 
	 ELSIF localizacaoProcesso = 'TURMA' THEN
		raise notice '<orgaoJulgador codigoOrgao="%" nomeOrgao="%" instancia="%" codigoMunicipioIBGE="%"/>' 
		, proc.id_orgao_colegiado, proc.ds_orgao_colegiado, org_tp_instancia, org_id_municipio_ibge_atual;	 
	 ELSIF localizacaoProcesso = 'VICEPRESIDENCIA' THEN
		raise notice '<orgaoJulgador codigoOrgao="77698" nomeOrgao="Gabinete da Vice-Presidência" instancia="%" codigoMunicipioIBGE="%"/>' 
		, org_tp_instancia, org_id_municipio_ibge_atual;
	 ELSIF localizacaoProcesso = 'PRESIDENCIA' THEN
		raise notice '<orgaoJulgador codigoOrgao="77697" nomeOrgao="Gabinete da Presidência" instancia="%" codigoMunicipioIBGE="%"/>' 
		, org_tp_instancia, org_id_municipio_ibge_atual;		
	 END IF;
	 
	 IF mov.cd_movimento in (431,434,50091,50095,11015) THEN
		localizacaoProcesso := 'TURMA';
	 END IF;	 
  
	  IF  array_length(ARRAYcodComplemento,1) is not null THEN	
		FOR C1 IN 1..array_upper(ARRAYcodComplemento, 1)
			LOOP
			  ARRAYcodComplemento := array_remove(ARRAYcodComplemento,ARRAYcodComplemento[1]);
			  ARRAYdescricaoComplemento := array_remove(ARRAYdescricaoComplemento,ARRAYdescricaoComplemento[1]);
			  ARRAYcodComplementoTabelado := array_remove(ARRAYcodComplementoTabelado,ARRAYcodComplementoTabelado[1]);
			END LOOP;	
	  END IF;
	  
      raise notice '</movimento>';
	  tipoResponsavelMovimento := '';
	  codComplemento10966 := '';
    end loop;

    raise notice '</cnj:processo>';

  end if;    
  end loop;

   raise notice '</cnj:processos>';
end
$$;
